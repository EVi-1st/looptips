{"config":{"lang":["en"],"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"Introduction \u2301 Welcome to LoopTips! The purpose of these pages is to help you make the most of your DIY closed-looping experience. In particular, these pages support users of the Loop app . These documents have been a long time in the making and as always, your feedback is welcome. If you have comments, please feel free to provide input at the Looped Facebook Group or in Loop's Zulipchat . LoopTips is a companion to the LoopDocs. LoopTips does not cover the build or installation of Loop app. If you have problems with building your Loop app, or troubleshooting the technical aspects of Loop operations, please head over to the LoopDocs for help. The pages here are specifically related to understanding how your loop is recommending the actions being taken, and how you can improve your blood glucose outcomes on Loop. What is a closed loop? \u2301 The U.S. Food and Drug Administration (FDA) has a general definition of an \"artificial pancreas device system\" (aka closed loop system) on their website , quoted below. \"Most Artificial Pancreas Device Systems consists of three types of devices already familiar to many people with diabetes: a continuous glucose monitoring system (CGM) and an insulin infusion pump. A blood glucose device (such as a glucose meter) is used to calibrate the CGM. A computer-controlled algorithm connects the CGM and insulin infusion pump to allow continuous communication between the two devices. Sometimes an artificial pancreas device system is referred to as a \"closed-loop\" system, an \"automated insulin delivery\" system, or an \"autonomous system for glycemic control.\" An Artificial Pancreas Device System will not only monitor glucose levels in the body but also automatically adjust the delivery of insulin to reduce high blood glucose levels (hyperglycemia) and minimize the incidence of low blood glucose (hypoglycemia) with little or no input from the patient.\" What is Loop? \u2301 The Loop app is a do-it-yourself closed loop algorithm and user interface, developed through the work of community volunteers. You can read about the history of Loop development in LoopDocs. Loop predicts future blood glucose based on basals, carbohydrate intake, insulin deliveries, and current CGM readings. These blood glucose predictions provide Loop with the information needed to recommend a temporary basal rate to attain a targeted glucose range in the future. The system can either operate as an \u201copen loop\u201d by making recommendations to the user for their approval before enacting or as a \u201cclosed loop\u201d by automatically setting the recommended temporary basal rate. As exciting as this sounds...we should first get the cavaets out of the way. There are some limitations on what kind of pumps/equipment are required. This system doesn't work with most pumps and requires you to do some work (directions are thoroughly covered in LoopDocs). Loop only works on an iPhone Loop only works with older Medtronic pumps Medtronic x15 series (all work) Medtronic x22 series (all work) Medtronic x23 series (2.4A or lower) Medtronic x54 series (WW: 2.6A or lower and Canadian/Australian: 2.7A or lower) You need access to a Mac computer to build Loop app onto your iPhone You need to buy a RileyLink ($150) and a developer license ($99 per year) Put in other words, no this does not current work on android phones. Animas, T-slim, Combo, Dana-R, Dana-RS, Medtronic (not listed above), and any other pump you can name will also not be compatible. The only exception is the current Omnipod pumps (called Eros pods that are used with the PDMs, not the DASH pods that are in limited release currently)...we are very close to having Loop compatible with those Eros pods. Disclaimer \u2301 While it may seem obvious, please consult with your health care professional regarding your diabetes management. The suggestions and discussion in LoopTips are not a one-size-fits-all nor intended to replace the input from your doctor. You take full responsibility for building and running this system and do so at your own risk.","title":"Home"},{"location":"#introduction","text":"Welcome to LoopTips! The purpose of these pages is to help you make the most of your DIY closed-looping experience. In particular, these pages support users of the Loop app . These documents have been a long time in the making and as always, your feedback is welcome. If you have comments, please feel free to provide input at the Looped Facebook Group or in Loop's Zulipchat . LoopTips is a companion to the LoopDocs. LoopTips does not cover the build or installation of Loop app. If you have problems with building your Loop app, or troubleshooting the technical aspects of Loop operations, please head over to the LoopDocs for help. The pages here are specifically related to understanding how your loop is recommending the actions being taken, and how you can improve your blood glucose outcomes on Loop.","title":"Introduction"},{"location":"#what-is-a-closed-loop","text":"The U.S. Food and Drug Administration (FDA) has a general definition of an \"artificial pancreas device system\" (aka closed loop system) on their website , quoted below. \"Most Artificial Pancreas Device Systems consists of three types of devices already familiar to many people with diabetes: a continuous glucose monitoring system (CGM) and an insulin infusion pump. A blood glucose device (such as a glucose meter) is used to calibrate the CGM. A computer-controlled algorithm connects the CGM and insulin infusion pump to allow continuous communication between the two devices. Sometimes an artificial pancreas device system is referred to as a \"closed-loop\" system, an \"automated insulin delivery\" system, or an \"autonomous system for glycemic control.\" An Artificial Pancreas Device System will not only monitor glucose levels in the body but also automatically adjust the delivery of insulin to reduce high blood glucose levels (hyperglycemia) and minimize the incidence of low blood glucose (hypoglycemia) with little or no input from the patient.\"","title":"What is a closed loop?"},{"location":"#what-is-loop","text":"The Loop app is a do-it-yourself closed loop algorithm and user interface, developed through the work of community volunteers. You can read about the history of Loop development in LoopDocs. Loop predicts future blood glucose based on basals, carbohydrate intake, insulin deliveries, and current CGM readings. These blood glucose predictions provide Loop with the information needed to recommend a temporary basal rate to attain a targeted glucose range in the future. The system can either operate as an \u201copen loop\u201d by making recommendations to the user for their approval before enacting or as a \u201cclosed loop\u201d by automatically setting the recommended temporary basal rate. As exciting as this sounds...we should first get the cavaets out of the way. There are some limitations on what kind of pumps/equipment are required. This system doesn't work with most pumps and requires you to do some work (directions are thoroughly covered in LoopDocs). Loop only works on an iPhone Loop only works with older Medtronic pumps Medtronic x15 series (all work) Medtronic x22 series (all work) Medtronic x23 series (2.4A or lower) Medtronic x54 series (WW: 2.6A or lower and Canadian/Australian: 2.7A or lower) You need access to a Mac computer to build Loop app onto your iPhone You need to buy a RileyLink ($150) and a developer license ($99 per year) Put in other words, no this does not current work on android phones. Animas, T-slim, Combo, Dana-R, Dana-RS, Medtronic (not listed above), and any other pump you can name will also not be compatible. The only exception is the current Omnipod pumps (called Eros pods that are used with the PDMs, not the DASH pods that are in limited release currently)...we are very close to having Loop compatible with those Eros pods.","title":"What is Loop?"},{"location":"#disclaimer","text":"While it may seem obvious, please consult with your health care professional regarding your diabetes management. The suggestions and discussion in LoopTips are not a one-size-fits-all nor intended to replace the input from your doctor. You take full responsibility for building and running this system and do so at your own risk.","title":"Disclaimer"},{"location":"algorithm/bolus/","text":"Bolus Recommendations \u2301 Loop will also recommend bolus insulin corrections when the eventual blood glucose is greater than the correction target and the active insulin is not sufficient to cover the predicted excursion above correction target. Note that Loop never issues a bolus command automatically; all boluses are initiated by the user. The bolus dose calculation is identical to the dose equation given in the basal recommendations section, with the exception that: the insulin contribution from the currently running temporary basal set by Loop is removed or subtracted from the recommended bolus amount, and the delta is calculated for the top of your correction range, rather than the average of the correction range. For recently saved carbohydrates where the projected carbohydrate absorption will outlast the insulin activity duration (e.g., very slow digesting meals like pizza or pasta), Loop\u2019s algorithm will inherently decrease the initial meal bolus \u2014 to prevent hypoglycemia events that often occur after these meals \u2014 by only recommending enough bolus to prevent going below the correction range. As described above, the Loop algorithm computes the recommended bolus such that predicted glucose will not dip below the correction range. This may result in a future blood glucose predicted above correction range, but will prevent a hypo event shortly after the meal (as is sometimes occurs for people giving a \"pizza bolus\" in traditional pump therapy). Loop will then later make corrections by issuing higher temporary basals. In effect, this algorithm behavior mimics traditional pump therapy of \u201cextended\u201d or \u201cdual wave\u201d bolusing, but with the benefit of added information about actual carbohydrate absorption effects as time goes by. Finally, Loop checks that the result of the calculations are below the maximum single bolus the Loop user specified in their settings. If the calculated bolus is less than the maximum single bolus setting, then the recommended bolus will be displayed in Loop\u2019s bolus tool. Bolusing safety feature If the current blood glucose, or any predicted blood glucose, falls below the suspend threshold, Loop will not return a recommended bolus. When the minimum blood glucose rises above suspend threshold, the bolus tool will provide a recommended bolus. Example long absorption time bolus \u2301 For an example of Loop's bolus adjustments using carbohydrate absorption time, let's take a look at an example meal. This is an example of a long absorption meal. This is a mushroom (arborio) risotto dish with heavy whipping cream and cheese ingredients. While some white rice can be fairly quick acting, after several times eating this dish, the family has noticed that the meal tends to have a longer, slower duration of impact on blood glucose. Using a \"taco\" icon (3 hours absorption) was causing slight low blood glucose soon after eating the meal. Therefore, they have been using the pizza icon to enter the meal's carbohydrate absorption time. The initial meal entry was 70g at a \"pizza\" icon aborption time (4 hours). Based on carbohydrate ratio of 8 g/U, the initial bowl of risotto at 60g should have been a bolus of 7.5 units. Loop recommended 5.3 units, or about 70% of the total bolus that would be needed to cover the total carbohydrates. Loop recommended the lower upfront bolus because a full bolus would have overwhelmed the slow absorption of carbohydrates, and the likelihood would be a low blood glucose shortly after eating. As the meal was being absorped, Loop was tracking the carbohydrates still remaining to be absorped and expecting that blood glucose values would be rising soon (knowing that there was still insulin needing to be delivered once safely passed the near-meal low blood glucose potential). Loop would have provided the additional insulin via high temporary basals after seeing blood glucose impacts which indicated the potential for a low blood glucose had passed. The Loop user then had a second, smaller bowl of risotto about 90 minutes later, and entered 30g at 4 hours absorption again. Notice this bowl of risotto had a bolus recommendation much different than the original bowl. The second bowl had a recommendation of 5 units, much greater amount of bolus relative to the amount of carbs entered than the first bowl had received, and more than the carbohydrate ratio alone would provide (3.75 units). Why the \"extra\" 1.25 units? Because Loop was including some extra bolus amount to cover what it predicted could safely be provided from the amount not given in the original bowl's bolus (the original bolus was approximately 2.2 units short of carbohydrate ratio alone recommendation). If the user had not had the second bowl, Loop would have been providing high temporary basals as soon as blood glucose had exceeded the correction range. And in fact, you can see that Loop still provided the remaining insulin via high temporary basals as blood glucose rose after the second bowl, in effect making up the small remaining difference.","title":"Bolus"},{"location":"algorithm/bolus/#bolus-recommendations","text":"Loop will also recommend bolus insulin corrections when the eventual blood glucose is greater than the correction target and the active insulin is not sufficient to cover the predicted excursion above correction target. Note that Loop never issues a bolus command automatically; all boluses are initiated by the user. The bolus dose calculation is identical to the dose equation given in the basal recommendations section, with the exception that: the insulin contribution from the currently running temporary basal set by Loop is removed or subtracted from the recommended bolus amount, and the delta is calculated for the top of your correction range, rather than the average of the correction range. For recently saved carbohydrates where the projected carbohydrate absorption will outlast the insulin activity duration (e.g., very slow digesting meals like pizza or pasta), Loop\u2019s algorithm will inherently decrease the initial meal bolus \u2014 to prevent hypoglycemia events that often occur after these meals \u2014 by only recommending enough bolus to prevent going below the correction range. As described above, the Loop algorithm computes the recommended bolus such that predicted glucose will not dip below the correction range. This may result in a future blood glucose predicted above correction range, but will prevent a hypo event shortly after the meal (as is sometimes occurs for people giving a \"pizza bolus\" in traditional pump therapy). Loop will then later make corrections by issuing higher temporary basals. In effect, this algorithm behavior mimics traditional pump therapy of \u201cextended\u201d or \u201cdual wave\u201d bolusing, but with the benefit of added information about actual carbohydrate absorption effects as time goes by. Finally, Loop checks that the result of the calculations are below the maximum single bolus the Loop user specified in their settings. If the calculated bolus is less than the maximum single bolus setting, then the recommended bolus will be displayed in Loop\u2019s bolus tool. Bolusing safety feature If the current blood glucose, or any predicted blood glucose, falls below the suspend threshold, Loop will not return a recommended bolus. When the minimum blood glucose rises above suspend threshold, the bolus tool will provide a recommended bolus.","title":"Bolus Recommendations"},{"location":"algorithm/bolus/#example-long-absorption-time-bolus","text":"For an example of Loop's bolus adjustments using carbohydrate absorption time, let's take a look at an example meal. This is an example of a long absorption meal. This is a mushroom (arborio) risotto dish with heavy whipping cream and cheese ingredients. While some white rice can be fairly quick acting, after several times eating this dish, the family has noticed that the meal tends to have a longer, slower duration of impact on blood glucose. Using a \"taco\" icon (3 hours absorption) was causing slight low blood glucose soon after eating the meal. Therefore, they have been using the pizza icon to enter the meal's carbohydrate absorption time. The initial meal entry was 70g at a \"pizza\" icon aborption time (4 hours). Based on carbohydrate ratio of 8 g/U, the initial bowl of risotto at 60g should have been a bolus of 7.5 units. Loop recommended 5.3 units, or about 70% of the total bolus that would be needed to cover the total carbohydrates. Loop recommended the lower upfront bolus because a full bolus would have overwhelmed the slow absorption of carbohydrates, and the likelihood would be a low blood glucose shortly after eating. As the meal was being absorped, Loop was tracking the carbohydrates still remaining to be absorped and expecting that blood glucose values would be rising soon (knowing that there was still insulin needing to be delivered once safely passed the near-meal low blood glucose potential). Loop would have provided the additional insulin via high temporary basals after seeing blood glucose impacts which indicated the potential for a low blood glucose had passed. The Loop user then had a second, smaller bowl of risotto about 90 minutes later, and entered 30g at 4 hours absorption again. Notice this bowl of risotto had a bolus recommendation much different than the original bowl. The second bowl had a recommendation of 5 units, much greater amount of bolus relative to the amount of carbs entered than the first bowl had received, and more than the carbohydrate ratio alone would provide (3.75 units). Why the \"extra\" 1.25 units? Because Loop was including some extra bolus amount to cover what it predicted could safely be provided from the amount not given in the original bowl's bolus (the original bolus was approximately 2.2 units short of carbohydrate ratio alone recommendation). If the user had not had the second bowl, Loop would have been providing high temporary basals as soon as blood glucose had exceeded the correction range. And in fact, you can see that Loop still provided the remaining insulin via high temporary basals as blood glucose rose after the second bowl, in effect making up the small remaining difference.","title":"Example long absorption time bolus"},{"location":"algorithm/overview/","text":"Overview \u2301 Loop\u2019s algorithm for adjusting insulin delivery is oriented around making a glucose prediction. Every five minutes, triggered by new BG data, it generates a new prediction. Both bolus recommendations and temporary basal rates are set based on this prediction. Terminology \u2301 This graph and legend illustrates terms commonly used in discussing Loop's algorithm, and shows them in the context of historical and forecasted blood glucose in a style similar to the status screen of Loop. Insulin activity duration The insulin activity duration is the duration of the insulin activity curve, and describes the point at which the delivered insulin dose no longer affects blood glucose. The insulin activity duration is 6 hours for Loop's rapid-acting and fiasp insulin models. Correction range The correction range is the blood glucose range Loop uses to determine corrective actions (e.g., between 90 and 120 mg/dL in the figure). NOTE: Loop\u2019s correction range is a user setting and should not be confused with the target range, typically 70-180 mg/dL, used for the purpose of calculating the percent time in range. Correction minimum The lower or minimum value of the user\u2019s correction range, which is 90 mg/dL in the figure. Correction maximum The upper or maximum value of the user\u2019s correction range, which is 120 mg/dL in the figure. Correction target The correction target is the average value of the correction range. In the overview figure, this is 105 mg/dL given that the correction minimum is 90 mg/dL and the correction maximum is 120 mg/dL. Predicted blood glucose Loop makes a prediction of blood glucose values out for a length of time equal to your insulin action duration. The predicted blood glucose is the basis for how Loop makes its insulin delivery recommendations and actions. Eventual blood glucose The last value of the predicted glucose curve, in other words very last blood glucose predicted at the end of your insulin action duration. In the figure above, this is 85 mg/dL. Minimum predicted blood glucose The lowest blood glucose value at any point in time within the prediction. In the figure above, this is 77 mg/dL. Delta The delta is the difference between the eventual blood glucose and the correction target. In the overview figure, the eventual blood glucose is 90 mg/dL and the correction target is 105 mg/dL, which means that the delta = -15 mg/dL. Suspend Threshold The suspend threshold is a safety feature of the loop algorithm. If any predicted blood glucose is below this threshold, the Loop algorithm will issue a temporary basal rate of 0 CGM data Actual blood glucose measurements made by a continuous glucose monitor. Insulin sensitivity factor A configuration value that provides an estimate of how much blood glucose will drop given a unit of insulin. Active insulin Active insulin is the remaining amount of insulin activity from boluses and temporary basal rates relative to a user\u2019s scheduled basal rates. More specifically, it is the total amount of insulin activity due to all bolus and basal insulin delivered within the last N hours, where N is determined by the insulin activity duration. The amount of \u201cactive\u201d insulin depends upon the insulin activity curve, and also accounts for the insulin withheld via basal suspensions. As such, it is possible that the active insulin can be negative. Negative active insulin will result in an increase in predicted blood glucose.","title":"Overview"},{"location":"algorithm/overview/#overview","text":"Loop\u2019s algorithm for adjusting insulin delivery is oriented around making a glucose prediction. Every five minutes, triggered by new BG data, it generates a new prediction. Both bolus recommendations and temporary basal rates are set based on this prediction.","title":"Overview"},{"location":"algorithm/overview/#terminology","text":"This graph and legend illustrates terms commonly used in discussing Loop's algorithm, and shows them in the context of historical and forecasted blood glucose in a style similar to the status screen of Loop. Insulin activity duration The insulin activity duration is the duration of the insulin activity curve, and describes the point at which the delivered insulin dose no longer affects blood glucose. The insulin activity duration is 6 hours for Loop's rapid-acting and fiasp insulin models. Correction range The correction range is the blood glucose range Loop uses to determine corrective actions (e.g., between 90 and 120 mg/dL in the figure). NOTE: Loop\u2019s correction range is a user setting and should not be confused with the target range, typically 70-180 mg/dL, used for the purpose of calculating the percent time in range. Correction minimum The lower or minimum value of the user\u2019s correction range, which is 90 mg/dL in the figure. Correction maximum The upper or maximum value of the user\u2019s correction range, which is 120 mg/dL in the figure. Correction target The correction target is the average value of the correction range. In the overview figure, this is 105 mg/dL given that the correction minimum is 90 mg/dL and the correction maximum is 120 mg/dL. Predicted blood glucose Loop makes a prediction of blood glucose values out for a length of time equal to your insulin action duration. The predicted blood glucose is the basis for how Loop makes its insulin delivery recommendations and actions. Eventual blood glucose The last value of the predicted glucose curve, in other words very last blood glucose predicted at the end of your insulin action duration. In the figure above, this is 85 mg/dL. Minimum predicted blood glucose The lowest blood glucose value at any point in time within the prediction. In the figure above, this is 77 mg/dL. Delta The delta is the difference between the eventual blood glucose and the correction target. In the overview figure, the eventual blood glucose is 90 mg/dL and the correction target is 105 mg/dL, which means that the delta = -15 mg/dL. Suspend Threshold The suspend threshold is a safety feature of the loop algorithm. If any predicted blood glucose is below this threshold, the Loop algorithm will issue a temporary basal rate of 0 CGM data Actual blood glucose measurements made by a continuous glucose monitor. Insulin sensitivity factor A configuration value that provides an estimate of how much blood glucose will drop given a unit of insulin. Active insulin Active insulin is the remaining amount of insulin activity from boluses and temporary basal rates relative to a user\u2019s scheduled basal rates. More specifically, it is the total amount of insulin activity due to all bolus and basal insulin delivered within the last N hours, where N is determined by the insulin activity duration. The amount of \u201cactive\u201d insulin depends upon the insulin activity curve, and also accounts for the insulin withheld via basal suspensions. As such, it is possible that the active insulin can be negative. Negative active insulin will result in an increase in predicted blood glucose.","title":"Terminology"},{"location":"algorithm/prediction/","text":"Blood Glucose Prediction \u2301 Loop uses an algorithm to maintain blood glucose in a correction range by predicting the contributions from four individual effects (insulin, carbohydrates, retrospective correction, and blood glucose momentum) at any time t to recommend temporary basal rate corrections and boluses. You can see the individual contributions of these effects by tapping on the predicted blood glucose chart on Loop's status screen. Loop updates this blood glucose prediction every five minutes when a new CGM value has been received and the pump's status has been updated. Overview \u2301 Before we delve into each of the four individual effects, a general overview figure may be a helpful start. There are four effects summed together to produce Loop's final predicted blood glucose curve. Each individual effect, along with their combined effect, are illustrated in the figure below. Insulin, from boluses and temporary basals, will have a decreasing effect on the prediction. Carbohydrates will have an increasing effect on the prediction. Blood glucose momentum effect can have a positive or negative effect, depending on how blood glucose is trending in the most recent CGM values. As shown in the example below, blood glucose is trending slightly upwards at the time of the prediction. Therefore, the blood glucose momentum effect\u2019s contribution is pulling up the overall prediction from the other three effects for a short time. Retrospective correction is having a decreasing effect on the prediction, indicating that the recent rise in blood glucose was not as large as had been previously predicted by Loop in the recent past. The sections below provide detailed information on each of the four contributions. Insulin Effect \u2301 Most traditional pump users and caregivers are already familiar with the concept of an insulin activity curve, where the insulin\u2019s effect is time dependent. Insulin takes a little while to affect blood glucose. The insulin effect typically peaks around one hour after giving insulin and then gradually decays. Loop provides users with two different classes of insulin models (i.e., an exponential model and the Walsh model). All of the exponential models have an insulin activity duration of 6 hours, whereas the insulin activity duration is customizable for the Walsh model. The rapid-acting and Fiasp insulin activity curves are modeled as exponential curves that match the shape of the insulin activity curves from insulin labeling, and as observed in both adults and children. The amount of insulin effect remaining, or percent of remaining active insulin after an insulin bolus is delivered, is modeled mathematically in Loop with an exponential decay curve. Insulin Effect Remaining \u2301 If a user\u2019s insulin sensitivity factor (ISF) is 50 mg/dL per 1 unit of insulin and the user gives 2 units of insulin, then the user\u2019s blood glucose would be expected to drop 100 mg/dL within the 6 hours following the insulin delivery. This insulin effect can be visualized in several different ways: the expected active insulin, expected drop in blood glucose every 5 minutes after delivery, and expected cumulative drop in blood glucose. The figures below use the Rapid Acting - Adult insulin model in Loop. Active Insulin \u2301 This figure shows that 2 units of insulin are given initially, and the corresponding active insulin (i.e., insulin on board IOB) decays according to the curve below. The active insulin at any time is the product of original insulin delivered and the percent of insulin activity remaining. Knowing the expected active insulin over the next 6 hours, and the insulin sensitivity factor (50 mg/dL in this case), Loop can calculate the expected drop in blood glucose from that dose of insulin as shown in the figure below. NOTE: ISF is also a function of time, which means that if the user\u2019s scheduled ISF changes during the insulin activity time, it will change the expected drop in blood glucose due to the insulin effect. Expected Change in Blood Glucose \u2301 Lastly, taking the first derivative (i.e., the rate of change) of the cumulative drop in the blood glucose curve yields the expected change in blood glucose over the insulin activity duration. For each dose of insulin given, Loop calculates the expected discrete drop in blood glucose at each 5-minute period for the insulin activity duration, as shown below. Insulin Effect on Blood Glucose \u2301 For this example, assuming a user\u2019s blood glucose was 205 mg/dL at the time of insulin delivery, Loop would predict a drop in blood glucose due to the two units delivered at 12 pm as shown in the figure below. (note: need to correct legend to 2 unit bolus) Scheduled Basal Rates \u2301 In traditional basal/bolus pump therapy, basal rates are set to accommodate the user's endogenous glucose production (EGP) that causes blood glucose to rise. If a user's basal settings were exactly right in traditional pump therapy, the user would have perfectly flat blood glucose all day, all other factors being equal. In reality, people with type 1 diabetes, and their caregivers, know that basal settings are never exactly right. Every day is a little different, and a myriad of factors that affect blood glucose (e.g., including stress, hormones, sleep, etc.) may affect insulin needs. Some people have different basal profiles to accommodate these variations. Some people regularly tune and adjust their basal rates, and/or do so at their endocrinology clinic visits. Since the Loop algorithm assumes that the user-set basal rates are reasonably correct, it calculates the effect of insulin relative to your scheduled basal rates. If basal rates are not entirely correct, Loop can compensate a bit through the retrospective correction and blood glucose momentum effects, discussed later in this document. The insulin delivery chart below displays a bar-graph history of the temporary basal rates enacted by Loop. The display is relative to the scheduled basal rates entered in the Loop settings. A rate displayed in this chart as +0 would indicate that no temporary basal rate was set and that the basal rate being delivered was the scheduled basal rate. Positive values indicate a temporary basal rate was set above the scheduled basal rate (i.e., more insulin delivered), and negative values indicate that a temporary basal rate was set below the scheduled basal rate (i.e., less insulin delivered). For example, if the user\u2019s scheduled basal rate is 1 U/hr, and Loop gives a temporary basal rate of 3 U/hr, then it will calculate the expected drop in blood glucose due to +2 U/hr of insulin. Similarly if Loop sets a temporary basal rate of 0 U/hr for 1 hour, then the insulin effect will also be relative to the current scheduled basal rate of 1 U/hr, and Loop would predict the user\u2019s blood glucose to increase by the amount of change from -1 U/hr of insulin. If the user\u2019s ISF is 50 mg/dL, then Loop would predict blood glucose to rise 50 mg/dL over the insulin activity duration (6 hours). Here is a real-world example where Loop is setting many temporary basal rates over the the course of the day. The light orange bars are the temporary basal rates delivered and the solid orange line is the active insulin at any given time during the day. Total Insulin Effect (combining boluses and temporary basal rates) \u2301 Loop will combine or stack the active insulin of all the discrete (individual) boluses and temporary basal rates over the past insulin activity duration (6 hours), to predict the active insulin for the next 6 hours. As demonstrated above, using the predicted active insulin Loop can predict the blood glucose drop over the next 6 hours. Lastly, the combined effect of bolus and basal insulin are visually represented for the user by Loop\u2019s insulin charts: The insulin effect can be expressed mathematically: where BG is the expected change in blood glucose with the units (mg/dL/5min), ISF is the insulin sensitivity factor (mg/dL/U) at timet, and IA is the insulin activity (U/5min)at time t . Insulin activity can also be thought of as a velocity or rate of change in blood glucose due to insulin. The insulin activity accounts for the EGP and any active insulin from basals and boluses. Carbohydrate Effect \u2301 Carbohydrates will raise blood glucose, but the speed and degree to which they impact blood glucose is dependent on the type of carbohydrates. High glycemic index (GI) carbohydrates will raise blood glucose quickly over a shorter time, whereas low GI foods will raise blood glucose more slowly over a longer period. Foods like candy, juice, and fruits tend to be high GI foods, while pizza, burritos, and quesadillas are usually lower GI foods. Digestion issues like gastroparesis may also contribute to variations in carbohydrate absorption. Because carbohydrate absorption can be quite variable, Loop has a model that dynamically adjusts the expected remaining time of carbohydrate absorption. To start with, Loop allows the user to input a rough guess of how long they think the food or drink will take to absorb. The user\u2019s guess is used as a middle of the road estimate, and Loop\u2019s algorithm will shorten or lengthen it based on observed blood glucose change. For all carbohydrate entries, Loop assumes carbohydrates will not start absorbing for 10 minutes, so there is a 10-minute period of no absorption that is modeled prior to the absorption modeled in the next sections. Linear Carbohydrate Absorption \u2301 Loop takes a conservative view of how fast remaining carbohydrates will absorb. Because it is safer to under-deliver insulin, Loop starts out at a minimum rate of absorption based on extending the entered carbohydrate duration by 50%. Said another way, the minimum carbohydrate absorption rate is the total number of grams of carbohydrates over 150% of the entered duration. Using this initial minimum absorption rate, remaining carbohydrates are modeled to absorb linearly. For example, if the user enters a 72g carbohydrate meal, and selects an estimated absorption time of 4 hours, then Loop will forecast a 12ghr absorption rate for the next 6 hours. This rate can be termed the minimum absorption rate, which can be represented mathematically as: where MAR is the minimum absorption rate (g/hr), CA is the amount of carbohydrates (g) and d is the expected duration (hr) it will take the carbohydrates to absorb. Dynamic Carbohydrate Absorption \u2301 The linear model above is modulated by an additional calculation that uses recent observed blood glucose data to estimate how fast carbohydrates have been absorbing. The expected change in blood glucose due to insulin effects alone is compared to the actual observed changes in glucose. This difference is termed the insulin counteraction effect (ICE): where, ICE (mg/dL/5 min) is the insulin counteraction effect, OA is the observed activity (mg/dL/5min) or observed change in blood glucose at time t , and IA is the insulin activity (mg/dL/5min). Insulin counteraction effects are caused by more than just carbohydrates, and can include exercise, sensitivity changes, or mis-set insulin delivery settings (e.g., basal rate, ISF, etc.). However, since the effect of carbohydrates is often dominant (after insulin), Loop can still make useful ongoing adjustments to its carbohydrate model by assuming that the an increase in blood glucose is mainly carbohydrate absorption in the period following recorded meal entries. The insulin counteraction effect is converted into an estimated carbohydrate absorption amount by using the current carbohydrate-to-insulin ratio and the insulin sensitivity factor at the time of the recorded meal entry. where AC is the amount of carbohydrates absorbed (g/5min), ICE is the insulin counteraction effect, CIR is the carbohydrate-to-insulin ratio (g/U), and ISF is the insulin sensitivity factor (mg/dL/U) at time t . If multiple meal entries are active (i.e., still absorbing), the estimated absorption is split between each carbohydrate entry in proportion to each carbohydrate entry\u2019s minimum absorption rate. For example, if 72g carbohydrates with an expected absorption time of 4 hours was consumed at 12 pm, and another 72g of carbohydrates with an expected absorption time of 2 hours was consumed at 3 pm, then the minimum absorption rate (see MAR equation above) would be 12 g/hr and 6 g/hr respectively, or 1 g/5min and 0.5 g/5min. Examining just the simple linear carbohydrate effect of these two meals: If we further expand this example, by assuming the following at 4pm : that there are still carbohydrates left to be absorbed from both meals, that the estimated insulin counteraction effect (ICE) is +15 , and the user\u2019s CIR is 10 g/U and the ISF is 50 mg/dL/U, then the estimated amount of carbohydrates absorbed at 4pm would be 3g: Those 3g of carbohydrates would then be split amongst the meals proportional to their minimum absorption rates: resulting in 2g of absorption being attributed to Meal 1 and 1g attributed to Meal 2. Minimum Carbohydrate Absorption Rate \u2301 If the estimated carbohydrate absorption of a meal entry is less what would have been absorbed using the minimum absorption rate, then the minimum absorption rate is used instead. This is to ensure that meal entries expire in a reasonable amount of time. Modeling Remaining Active Carbohydrates \u2301 After the estimated absorbed carbohydrates have been subtracted from each meal entry, the remaining carbohydrates (for each entry) are then forecasted to decay or absorb using the minimum absorption rate. Loop uses this forecast to estimate the effect (active carbohydrates, or carbohydrate activity) of the remaining carbohydrates. The carbohydrate effect can be expressed mathematically using the terms described above: Retrospective Correction Effect \u2301 The retrospective correction effect allows the Loop algorithm to account for effects that are not modeled with the insulin and carbohydrate effects, by comparing historical predictions to the actual blood glucose. In addition to the modeled effects of insulin and carbohydrates, there are many other factors that affect blood glucose (e.g., exercise, stress, hormones, etc.). Many of these effects are active for a period of time. By observing its own forecast error, Loop can estimate the magnitude of these effects and, by assuming that they will continue for some short period of time, incorporate them into the forecast to improve forecast accuracy. To do this, Loop calculates a retrospective forecast with a start time of 30 minutes in the past, ending at the current time. Loop compares the retrospective forecast to the actual observed change in blood glucose, and the difference is summed into a blood glucose velocity or rate of difference: where BG vel is a velocity term (mg/dL per 5min) that represents the average blood glucose difference between the retrospective forecast (RF) and the actual blood glucose (BG) over the last 30 minutes. This term is applied to the current forecast from the insulin and carb effects with a linear decay over the next hour. For example, the first forecast point (t=5) is approximately 100% of this velocity, the forecast point one half hour from now is adjusted by 50% of the velocity, and points from one hour or more in the future are not affected by this term. The retrospective correction effect can be expressed mathematically: where BG is the predicted change in blood glucose with the units (mg/dL/5min) at time t over the time range of 5 to 60 minutes, and the other term gives the percentage of BG vel that is applied to this effect. The retrospective correction effect can be illustrated with an example: if the BG vel over the past 30 minutes was -10 mg/dL per 5min, then the retrospective correction effect over the next 60 minutes would be as follows: Minutes relative to now ( t=0 ) Percent of BG vel Applied to RC Effect 5 100% -10 10 91% -9.1 15 82% -8.2 20 73% -7.3 25 64% -6.4 30 55% -5.5 35 45% -4.5 40 36% -3.6 45 27% -2.7 50 18% -1.8 55 9% -0.9 60 0% 0 Here\u2019s an example below that shows the retrospective correction effect when the BG vel over the past 30 minutes was -10mg/dL/5min. Blood Glucose Momentum Effect \u2301 The blood glucose momentum effect incorporates a prediction component based on the assumption that recent blood glucose trends tend to persist for a short period of time. The blood glucose momentum portion of the algorithm gives weight or importance to recent blood glucose to improve the near-future forecast. Loop calculates the slope of the last 3 continuous CGM readings (i.e., the last 15 minutes) using linear regression. Using multiple points helps filter out noise in the CGM data while still responding fast to changing situations. That momentum slope (Mslope) is the approximate or average rate of change over the last 15 minutes, though it is normalized to 5 minutes so that the units are (mg/dL/5min). The momentum slope is then blended into the next 20 minutes of predicted blood glucose from the other effects (i.e., insulin, carbohydrates, and retrospective correction effects). This, in essence, makes the next 20 minutes of blood glucose prediction more sensitive to recent blood glucose trends. The blending of the recent trend slope into the next 20 minutes is weighted so that the first prediction point (5 minutes into the future) is highly influenced by the slope, and the influence of the slope gradually decays over the 20 minute time period. The momentum effect can be expressed mathematically as: NOTE: The term is also applied to the combined insulin, carbohydrates, and retrospective correction effects to get the delta blood glucose prediction. The momentum effect can be illustrated with an example: if the last 3 blood glucose readings were 100, 103, and 106 mg/dL, then the slope would be 3 mg/dL per 5 minutes (0.6 mg/dL per minute). The amount of that recent trend or slope applied to the next 20 minutes of predictions (i.e., the next 4 predictions from the other effects) is roughly 100% (3 mg/dL per 5 min) at 5 minutes, 66% (2 mg/dL per 5 min) at 10 minutes, 33% (1 mg/dL per 5 min) at 15 minutes, and 0% (0 mg/dL per 5 min) at 20 minutes. Also, if the combined effect from the insulin, carbohydrates, and retrospective correction is assumed to be a constant 6 mg/dL/5min over the next 20 minutes, then the expected overall effect and the predicted blood glucose can be calculated as follows. Minutes relative to now ( t=0 ) Percent of Slope Applied to Momentum Effect Momentum Effect (3mg/dL/5min) Percent of Other Effects Applied Overall Effect Other Effects (Insulin, Carbohydrate, and Retrospective Correction) Overall Effect (mg/dL/5min) Predicted BG (mg/dL) 5 100% 3 0 6 3 109 10 66.6% 2 33.3% 6 4 113 15 33.3% 1 66.6% 6 5 118 20 0% 0 100% 6 6 124 This example is illustrated in the figure below. It is also worth noting that Loop will not calculate blood glucose momentum in instances where CGM data is not continuous (i.e., must have at least three continuous CGM readings to draw the best-fit straight line trend). It also will not calculate blood glucose momentum when the last three CGM readings contain any calibration points, as those may not be representative of true blood glucose momentum trends. Predicting Glucose \u2301 As described in the momentum effect section, the momentum effect is blended with the insulin, carbohydrate, and retrospective correction effects to predict the change in blood glucose: Lastly, the forecast or predicted blood glucose BG at time t is the current blood glucose BG plus the sum of all blood glucose effects BG over the time interval [t5, t]: Each individual effect along with the combined effects are illustrated in the figure below. As shown, blood glucose is trending slightly upwards at the time of the prediction. Therefore, the blood glucose momentum effect\u2019s contribution is pulling up the overall prediction from the other three effects for a short time. Retrospective correction is having a dampening effect on the prediction, indicating that the recent rise in blood glucose was not as great as had been previously predicted in the recent past.","title":"Prediction"},{"location":"algorithm/prediction/#blood-glucose-prediction","text":"Loop uses an algorithm to maintain blood glucose in a correction range by predicting the contributions from four individual effects (insulin, carbohydrates, retrospective correction, and blood glucose momentum) at any time t to recommend temporary basal rate corrections and boluses. You can see the individual contributions of these effects by tapping on the predicted blood glucose chart on Loop's status screen. Loop updates this blood glucose prediction every five minutes when a new CGM value has been received and the pump's status has been updated.","title":"Blood Glucose Prediction"},{"location":"algorithm/prediction/#overview","text":"Before we delve into each of the four individual effects, a general overview figure may be a helpful start. There are four effects summed together to produce Loop's final predicted blood glucose curve. Each individual effect, along with their combined effect, are illustrated in the figure below. Insulin, from boluses and temporary basals, will have a decreasing effect on the prediction. Carbohydrates will have an increasing effect on the prediction. Blood glucose momentum effect can have a positive or negative effect, depending on how blood glucose is trending in the most recent CGM values. As shown in the example below, blood glucose is trending slightly upwards at the time of the prediction. Therefore, the blood glucose momentum effect\u2019s contribution is pulling up the overall prediction from the other three effects for a short time. Retrospective correction is having a decreasing effect on the prediction, indicating that the recent rise in blood glucose was not as large as had been previously predicted by Loop in the recent past. The sections below provide detailed information on each of the four contributions.","title":"Overview"},{"location":"algorithm/prediction/#insulin-effect","text":"Most traditional pump users and caregivers are already familiar with the concept of an insulin activity curve, where the insulin\u2019s effect is time dependent. Insulin takes a little while to affect blood glucose. The insulin effect typically peaks around one hour after giving insulin and then gradually decays. Loop provides users with two different classes of insulin models (i.e., an exponential model and the Walsh model). All of the exponential models have an insulin activity duration of 6 hours, whereas the insulin activity duration is customizable for the Walsh model. The rapid-acting and Fiasp insulin activity curves are modeled as exponential curves that match the shape of the insulin activity curves from insulin labeling, and as observed in both adults and children. The amount of insulin effect remaining, or percent of remaining active insulin after an insulin bolus is delivered, is modeled mathematically in Loop with an exponential decay curve.","title":"Insulin Effect"},{"location":"algorithm/prediction/#insulin-effect-remaining","text":"If a user\u2019s insulin sensitivity factor (ISF) is 50 mg/dL per 1 unit of insulin and the user gives 2 units of insulin, then the user\u2019s blood glucose would be expected to drop 100 mg/dL within the 6 hours following the insulin delivery. This insulin effect can be visualized in several different ways: the expected active insulin, expected drop in blood glucose every 5 minutes after delivery, and expected cumulative drop in blood glucose. The figures below use the Rapid Acting - Adult insulin model in Loop.","title":"Insulin Effect Remaining"},{"location":"algorithm/prediction/#active-insulin","text":"This figure shows that 2 units of insulin are given initially, and the corresponding active insulin (i.e., insulin on board IOB) decays according to the curve below. The active insulin at any time is the product of original insulin delivered and the percent of insulin activity remaining. Knowing the expected active insulin over the next 6 hours, and the insulin sensitivity factor (50 mg/dL in this case), Loop can calculate the expected drop in blood glucose from that dose of insulin as shown in the figure below. NOTE: ISF is also a function of time, which means that if the user\u2019s scheduled ISF changes during the insulin activity time, it will change the expected drop in blood glucose due to the insulin effect.","title":"Active Insulin"},{"location":"algorithm/prediction/#expected-change-in-blood-glucose","text":"Lastly, taking the first derivative (i.e., the rate of change) of the cumulative drop in the blood glucose curve yields the expected change in blood glucose over the insulin activity duration. For each dose of insulin given, Loop calculates the expected discrete drop in blood glucose at each 5-minute period for the insulin activity duration, as shown below.","title":"Expected Change in Blood Glucose"},{"location":"algorithm/prediction/#insulin-effect-on-blood-glucose","text":"For this example, assuming a user\u2019s blood glucose was 205 mg/dL at the time of insulin delivery, Loop would predict a drop in blood glucose due to the two units delivered at 12 pm as shown in the figure below. (note: need to correct legend to 2 unit bolus)","title":"Insulin Effect on Blood Glucose"},{"location":"algorithm/prediction/#scheduled-basal-rates","text":"In traditional basal/bolus pump therapy, basal rates are set to accommodate the user's endogenous glucose production (EGP) that causes blood glucose to rise. If a user's basal settings were exactly right in traditional pump therapy, the user would have perfectly flat blood glucose all day, all other factors being equal. In reality, people with type 1 diabetes, and their caregivers, know that basal settings are never exactly right. Every day is a little different, and a myriad of factors that affect blood glucose (e.g., including stress, hormones, sleep, etc.) may affect insulin needs. Some people have different basal profiles to accommodate these variations. Some people regularly tune and adjust their basal rates, and/or do so at their endocrinology clinic visits. Since the Loop algorithm assumes that the user-set basal rates are reasonably correct, it calculates the effect of insulin relative to your scheduled basal rates. If basal rates are not entirely correct, Loop can compensate a bit through the retrospective correction and blood glucose momentum effects, discussed later in this document. The insulin delivery chart below displays a bar-graph history of the temporary basal rates enacted by Loop. The display is relative to the scheduled basal rates entered in the Loop settings. A rate displayed in this chart as +0 would indicate that no temporary basal rate was set and that the basal rate being delivered was the scheduled basal rate. Positive values indicate a temporary basal rate was set above the scheduled basal rate (i.e., more insulin delivered), and negative values indicate that a temporary basal rate was set below the scheduled basal rate (i.e., less insulin delivered). For example, if the user\u2019s scheduled basal rate is 1 U/hr, and Loop gives a temporary basal rate of 3 U/hr, then it will calculate the expected drop in blood glucose due to +2 U/hr of insulin. Similarly if Loop sets a temporary basal rate of 0 U/hr for 1 hour, then the insulin effect will also be relative to the current scheduled basal rate of 1 U/hr, and Loop would predict the user\u2019s blood glucose to increase by the amount of change from -1 U/hr of insulin. If the user\u2019s ISF is 50 mg/dL, then Loop would predict blood glucose to rise 50 mg/dL over the insulin activity duration (6 hours). Here is a real-world example where Loop is setting many temporary basal rates over the the course of the day. The light orange bars are the temporary basal rates delivered and the solid orange line is the active insulin at any given time during the day.","title":"Scheduled Basal Rates"},{"location":"algorithm/prediction/#total-insulin-effect-combining-boluses-and-temporary-basal-rates","text":"Loop will combine or stack the active insulin of all the discrete (individual) boluses and temporary basal rates over the past insulin activity duration (6 hours), to predict the active insulin for the next 6 hours. As demonstrated above, using the predicted active insulin Loop can predict the blood glucose drop over the next 6 hours. Lastly, the combined effect of bolus and basal insulin are visually represented for the user by Loop\u2019s insulin charts: The insulin effect can be expressed mathematically: where BG is the expected change in blood glucose with the units (mg/dL/5min), ISF is the insulin sensitivity factor (mg/dL/U) at timet, and IA is the insulin activity (U/5min)at time t . Insulin activity can also be thought of as a velocity or rate of change in blood glucose due to insulin. The insulin activity accounts for the EGP and any active insulin from basals and boluses.","title":"Total Insulin Effect (combining boluses and temporary basal rates)"},{"location":"algorithm/prediction/#carbohydrate-effect","text":"Carbohydrates will raise blood glucose, but the speed and degree to which they impact blood glucose is dependent on the type of carbohydrates. High glycemic index (GI) carbohydrates will raise blood glucose quickly over a shorter time, whereas low GI foods will raise blood glucose more slowly over a longer period. Foods like candy, juice, and fruits tend to be high GI foods, while pizza, burritos, and quesadillas are usually lower GI foods. Digestion issues like gastroparesis may also contribute to variations in carbohydrate absorption. Because carbohydrate absorption can be quite variable, Loop has a model that dynamically adjusts the expected remaining time of carbohydrate absorption. To start with, Loop allows the user to input a rough guess of how long they think the food or drink will take to absorb. The user\u2019s guess is used as a middle of the road estimate, and Loop\u2019s algorithm will shorten or lengthen it based on observed blood glucose change. For all carbohydrate entries, Loop assumes carbohydrates will not start absorbing for 10 minutes, so there is a 10-minute period of no absorption that is modeled prior to the absorption modeled in the next sections.","title":"Carbohydrate Effect"},{"location":"algorithm/prediction/#linear-carbohydrate-absorption","text":"Loop takes a conservative view of how fast remaining carbohydrates will absorb. Because it is safer to under-deliver insulin, Loop starts out at a minimum rate of absorption based on extending the entered carbohydrate duration by 50%. Said another way, the minimum carbohydrate absorption rate is the total number of grams of carbohydrates over 150% of the entered duration. Using this initial minimum absorption rate, remaining carbohydrates are modeled to absorb linearly. For example, if the user enters a 72g carbohydrate meal, and selects an estimated absorption time of 4 hours, then Loop will forecast a 12ghr absorption rate for the next 6 hours. This rate can be termed the minimum absorption rate, which can be represented mathematically as: where MAR is the minimum absorption rate (g/hr), CA is the amount of carbohydrates (g) and d is the expected duration (hr) it will take the carbohydrates to absorb.","title":"Linear Carbohydrate Absorption"},{"location":"algorithm/prediction/#dynamic-carbohydrate-absorption","text":"The linear model above is modulated by an additional calculation that uses recent observed blood glucose data to estimate how fast carbohydrates have been absorbing. The expected change in blood glucose due to insulin effects alone is compared to the actual observed changes in glucose. This difference is termed the insulin counteraction effect (ICE): where, ICE (mg/dL/5 min) is the insulin counteraction effect, OA is the observed activity (mg/dL/5min) or observed change in blood glucose at time t , and IA is the insulin activity (mg/dL/5min). Insulin counteraction effects are caused by more than just carbohydrates, and can include exercise, sensitivity changes, or mis-set insulin delivery settings (e.g., basal rate, ISF, etc.). However, since the effect of carbohydrates is often dominant (after insulin), Loop can still make useful ongoing adjustments to its carbohydrate model by assuming that the an increase in blood glucose is mainly carbohydrate absorption in the period following recorded meal entries. The insulin counteraction effect is converted into an estimated carbohydrate absorption amount by using the current carbohydrate-to-insulin ratio and the insulin sensitivity factor at the time of the recorded meal entry. where AC is the amount of carbohydrates absorbed (g/5min), ICE is the insulin counteraction effect, CIR is the carbohydrate-to-insulin ratio (g/U), and ISF is the insulin sensitivity factor (mg/dL/U) at time t . If multiple meal entries are active (i.e., still absorbing), the estimated absorption is split between each carbohydrate entry in proportion to each carbohydrate entry\u2019s minimum absorption rate. For example, if 72g carbohydrates with an expected absorption time of 4 hours was consumed at 12 pm, and another 72g of carbohydrates with an expected absorption time of 2 hours was consumed at 3 pm, then the minimum absorption rate (see MAR equation above) would be 12 g/hr and 6 g/hr respectively, or 1 g/5min and 0.5 g/5min. Examining just the simple linear carbohydrate effect of these two meals: If we further expand this example, by assuming the following at 4pm : that there are still carbohydrates left to be absorbed from both meals, that the estimated insulin counteraction effect (ICE) is +15 , and the user\u2019s CIR is 10 g/U and the ISF is 50 mg/dL/U, then the estimated amount of carbohydrates absorbed at 4pm would be 3g: Those 3g of carbohydrates would then be split amongst the meals proportional to their minimum absorption rates: resulting in 2g of absorption being attributed to Meal 1 and 1g attributed to Meal 2.","title":"Dynamic Carbohydrate Absorption"},{"location":"algorithm/prediction/#minimum-carbohydrate-absorption-rate","text":"If the estimated carbohydrate absorption of a meal entry is less what would have been absorbed using the minimum absorption rate, then the minimum absorption rate is used instead. This is to ensure that meal entries expire in a reasonable amount of time.","title":"Minimum Carbohydrate Absorption Rate"},{"location":"algorithm/prediction/#modeling-remaining-active-carbohydrates","text":"After the estimated absorbed carbohydrates have been subtracted from each meal entry, the remaining carbohydrates (for each entry) are then forecasted to decay or absorb using the minimum absorption rate. Loop uses this forecast to estimate the effect (active carbohydrates, or carbohydrate activity) of the remaining carbohydrates. The carbohydrate effect can be expressed mathematically using the terms described above:","title":"Modeling Remaining Active Carbohydrates"},{"location":"algorithm/prediction/#retrospective-correction-effect","text":"The retrospective correction effect allows the Loop algorithm to account for effects that are not modeled with the insulin and carbohydrate effects, by comparing historical predictions to the actual blood glucose. In addition to the modeled effects of insulin and carbohydrates, there are many other factors that affect blood glucose (e.g., exercise, stress, hormones, etc.). Many of these effects are active for a period of time. By observing its own forecast error, Loop can estimate the magnitude of these effects and, by assuming that they will continue for some short period of time, incorporate them into the forecast to improve forecast accuracy. To do this, Loop calculates a retrospective forecast with a start time of 30 minutes in the past, ending at the current time. Loop compares the retrospective forecast to the actual observed change in blood glucose, and the difference is summed into a blood glucose velocity or rate of difference: where BG vel is a velocity term (mg/dL per 5min) that represents the average blood glucose difference between the retrospective forecast (RF) and the actual blood glucose (BG) over the last 30 minutes. This term is applied to the current forecast from the insulin and carb effects with a linear decay over the next hour. For example, the first forecast point (t=5) is approximately 100% of this velocity, the forecast point one half hour from now is adjusted by 50% of the velocity, and points from one hour or more in the future are not affected by this term. The retrospective correction effect can be expressed mathematically: where BG is the predicted change in blood glucose with the units (mg/dL/5min) at time t over the time range of 5 to 60 minutes, and the other term gives the percentage of BG vel that is applied to this effect. The retrospective correction effect can be illustrated with an example: if the BG vel over the past 30 minutes was -10 mg/dL per 5min, then the retrospective correction effect over the next 60 minutes would be as follows: Minutes relative to now ( t=0 ) Percent of BG vel Applied to RC Effect 5 100% -10 10 91% -9.1 15 82% -8.2 20 73% -7.3 25 64% -6.4 30 55% -5.5 35 45% -4.5 40 36% -3.6 45 27% -2.7 50 18% -1.8 55 9% -0.9 60 0% 0 Here\u2019s an example below that shows the retrospective correction effect when the BG vel over the past 30 minutes was -10mg/dL/5min.","title":"Retrospective Correction Effect"},{"location":"algorithm/prediction/#blood-glucose-momentum-effect","text":"The blood glucose momentum effect incorporates a prediction component based on the assumption that recent blood glucose trends tend to persist for a short period of time. The blood glucose momentum portion of the algorithm gives weight or importance to recent blood glucose to improve the near-future forecast. Loop calculates the slope of the last 3 continuous CGM readings (i.e., the last 15 minutes) using linear regression. Using multiple points helps filter out noise in the CGM data while still responding fast to changing situations. That momentum slope (Mslope) is the approximate or average rate of change over the last 15 minutes, though it is normalized to 5 minutes so that the units are (mg/dL/5min). The momentum slope is then blended into the next 20 minutes of predicted blood glucose from the other effects (i.e., insulin, carbohydrates, and retrospective correction effects). This, in essence, makes the next 20 minutes of blood glucose prediction more sensitive to recent blood glucose trends. The blending of the recent trend slope into the next 20 minutes is weighted so that the first prediction point (5 minutes into the future) is highly influenced by the slope, and the influence of the slope gradually decays over the 20 minute time period. The momentum effect can be expressed mathematically as: NOTE: The term is also applied to the combined insulin, carbohydrates, and retrospective correction effects to get the delta blood glucose prediction. The momentum effect can be illustrated with an example: if the last 3 blood glucose readings were 100, 103, and 106 mg/dL, then the slope would be 3 mg/dL per 5 minutes (0.6 mg/dL per minute). The amount of that recent trend or slope applied to the next 20 minutes of predictions (i.e., the next 4 predictions from the other effects) is roughly 100% (3 mg/dL per 5 min) at 5 minutes, 66% (2 mg/dL per 5 min) at 10 minutes, 33% (1 mg/dL per 5 min) at 15 minutes, and 0% (0 mg/dL per 5 min) at 20 minutes. Also, if the combined effect from the insulin, carbohydrates, and retrospective correction is assumed to be a constant 6 mg/dL/5min over the next 20 minutes, then the expected overall effect and the predicted blood glucose can be calculated as follows. Minutes relative to now ( t=0 ) Percent of Slope Applied to Momentum Effect Momentum Effect (3mg/dL/5min) Percent of Other Effects Applied Overall Effect Other Effects (Insulin, Carbohydrate, and Retrospective Correction) Overall Effect (mg/dL/5min) Predicted BG (mg/dL) 5 100% 3 0 6 3 109 10 66.6% 2 33.3% 6 4 113 15 33.3% 1 66.6% 6 5 118 20 0% 0 100% 6 6 124 This example is illustrated in the figure below. It is also worth noting that Loop will not calculate blood glucose momentum in instances where CGM data is not continuous (i.e., must have at least three continuous CGM readings to draw the best-fit straight line trend). It also will not calculate blood glucose momentum when the last three CGM readings contain any calibration points, as those may not be representative of true blood glucose momentum trends.","title":"Blood Glucose Momentum Effect"},{"location":"algorithm/prediction/#predicting-glucose","text":"As described in the momentum effect section, the momentum effect is blended with the insulin, carbohydrate, and retrospective correction effects to predict the change in blood glucose: Lastly, the forecast or predicted blood glucose BG at time t is the current blood glucose BG plus the sum of all blood glucose effects BG over the time interval [t5, t]: Each individual effect along with the combined effects are illustrated in the figure below. As shown, blood glucose is trending slightly upwards at the time of the prediction. Therefore, the blood glucose momentum effect\u2019s contribution is pulling up the overall prediction from the other three effects for a short time. Retrospective correction is having a dampening effect on the prediction, indicating that the recent rise in blood glucose was not as great as had been previously predicted in the recent past.","title":"Predicting Glucose"},{"location":"algorithm/temp-basal/","text":"Basal Adjustments \u2301 The Loop algorithm takes one of four actions depending upon the eventual blood glucose, predicted glucose, and suspend threshold. Note that all temporary basal rate commands are issued for 30 minutes, however they may be updated (re-issued) every 5 minutes. Said another way, Loop may enact a new temporary basal rate every 5 minutes. But, if communication with the pump is lost, the last issued temporary basal rate will last for at most 30 minutes before the pump reverts to the user\u2019s scheduled basal rates. Note: If a user is operating Loop in open loop mode, the Loop will only recommend basal dosing actions and will not automatically enact those recommendations. Four Possbile Actions \u2301 Loop implements one of four possible basal actions: decrease , increase , suspend , or resume a scheduled basal rate. Decrease Basal Rate \u2301 If the eventual blood glucose is less than the correction range and all of the predicted glucose values are above the suspend threshold, then Loop will issue a temporary basal rate that is lower than the current scheduled basal rate to bring the eventual blood glucose up to the correction target. Increase Basal Rate \u2301 If the eventual blood glucose is greater than the correction range and all of the predicted glucose values are above the suspend threshold, then Loop will issue a temporary basal rate that is higher than the current basal rate to bring the eventual blood glucose down to the correction target. Suspend Basal Rate \u2301 If the minimum predicted blood glucose goes below the suspend threshold, then Loop will issue a temporary basal rate of zero units per hour, regardless of the eventual blood glucose. Resume Basal Rate \u2301 There are three situations where the Loop algorithm will resume the current scheduled basal rate. If the eventual blood glucose is within the correction range, and all of the predicted glucose values are above the suspend threshold, then Loop will resume the current scheduled basal rate. If the eventual blood glucose is above the correction range, and the predicted glucose values have a temporary excursion below the correction range and are above the suspend threshold, then Loop will resume the current scheduled basal rate. If the Loop algorithm does not have ALL of the data it needs to make a prediction, it will let the remaining temporary basal rate run its duration (maximum of 30 minutes), and then the basal rate will default back to the current scheduled basal rate, thus returning to the same therapy pattern that they would receive using a traditional insulin pump. Determining the Temporary Basal Rate \u2301 To determine the corrective temporary basal rate to implement, Loop calculates a \u201cdose\u201d in the same way doses are calculated in both open loop and traditional insulin pump therapy. It's also the same math many people on multiple-daily injection therapy use. The benefit of Loop (and all other closed loop algorithms) is that it does this math every 5 minutes, and is far less prone to error than humans doing math. Loop also does its math based on predicting into the future, which traditional pumps, and humans, do not do. The amount of insulin needed, or dose, is calculated using the desired reduction in blood glucose and the user\u2019s ISF. For the Loop algorithm, the desired reduction in blood glucose is the delta between the eventual blood glucose and the correction target: A major difference between traditional pump therapy and how the Loop calculates dose is that in pump therapy the current blood glucose is used to estimate the dose, whereas in the Loop algorithm the eventual and minimum blood glucose predictions are also used in determining dosing decisions. Loop then converts the dose into a basal rate using the Loop\u2019s maximum basal rate duration of 30 minutes: where BR is the basal rate (U/hr), which is the amount of insulin needed over the next 30 minutes to bring the eventual blood glucose to the correction target. The basal rate, however, is the amount of basal rate needed beyond the user\u2019s scheduled basal rate. As such, the required basal rate can be determined by: where RBR is the required basal rate and SBR is the scheduled basal rate. Finally, Loop compares the RBR with the user-specified maximum temporary basal rate setting to determine the temporary basal to issue: If RBR \u2265 maximum basal rate, then Loop will issue the maximum basal rate If RBR < maximum temporary basal rate, then Loop will issue RBR After running the temporary basal calculation described above, Loop checks whether there is already an appropriate basal running with at least 10 minutes remaining. If so, Loop will not reissue the temporary basal. However, if the recommended temporary basal differs from the currently running temporary basal \u2014 or the current scheduled basal if no temporary is running \u2014 then Loop will replace the current basal rate with the recommended temporary basal rate. As mentioned at the beginning of this section, the process of determining whether a temporary basal should be issued is repeated every 5 minutes. Temporary Basal Rate Calculation Example \u2301 To illustrate how the Loop calculates the temporary basal rate to issue, consider the calculation for the following scenario: Eventual blood glucose = 200 mg/dL Correction target = 100 mg/dL ISF = 50 mg/dL/U Current scheduled basal rate (SBR) is 1 U/hr Maximum basal setting (set by user in Loop) = 6 U/hr First, calculate the dose: Then, convert the dose into a basal rate to be issued for the next 30 minutes: Next, calculate the required basal rate: Lastly, compare the required basal rate to the maximum temporary basal rate, and find that Loop will enact a temporary basal rate of 5 U/hr for 30 minutes since this temporary basal rate is below the maximum temporary basal rate of 6 U/hr, which was set by the user in Loop app settings.","title":"Basal"},{"location":"algorithm/temp-basal/#basal-adjustments","text":"The Loop algorithm takes one of four actions depending upon the eventual blood glucose, predicted glucose, and suspend threshold. Note that all temporary basal rate commands are issued for 30 minutes, however they may be updated (re-issued) every 5 minutes. Said another way, Loop may enact a new temporary basal rate every 5 minutes. But, if communication with the pump is lost, the last issued temporary basal rate will last for at most 30 minutes before the pump reverts to the user\u2019s scheduled basal rates. Note: If a user is operating Loop in open loop mode, the Loop will only recommend basal dosing actions and will not automatically enact those recommendations.","title":"Basal Adjustments"},{"location":"algorithm/temp-basal/#four-possbile-actions","text":"Loop implements one of four possible basal actions: decrease , increase , suspend , or resume a scheduled basal rate.","title":"Four Possbile Actions"},{"location":"algorithm/temp-basal/#decrease-basal-rate","text":"If the eventual blood glucose is less than the correction range and all of the predicted glucose values are above the suspend threshold, then Loop will issue a temporary basal rate that is lower than the current scheduled basal rate to bring the eventual blood glucose up to the correction target.","title":"Decrease Basal Rate"},{"location":"algorithm/temp-basal/#increase-basal-rate","text":"If the eventual blood glucose is greater than the correction range and all of the predicted glucose values are above the suspend threshold, then Loop will issue a temporary basal rate that is higher than the current basal rate to bring the eventual blood glucose down to the correction target.","title":"Increase Basal Rate"},{"location":"algorithm/temp-basal/#suspend-basal-rate","text":"If the minimum predicted blood glucose goes below the suspend threshold, then Loop will issue a temporary basal rate of zero units per hour, regardless of the eventual blood glucose.","title":"Suspend Basal Rate"},{"location":"algorithm/temp-basal/#resume-basal-rate","text":"There are three situations where the Loop algorithm will resume the current scheduled basal rate. If the eventual blood glucose is within the correction range, and all of the predicted glucose values are above the suspend threshold, then Loop will resume the current scheduled basal rate. If the eventual blood glucose is above the correction range, and the predicted glucose values have a temporary excursion below the correction range and are above the suspend threshold, then Loop will resume the current scheduled basal rate. If the Loop algorithm does not have ALL of the data it needs to make a prediction, it will let the remaining temporary basal rate run its duration (maximum of 30 minutes), and then the basal rate will default back to the current scheduled basal rate, thus returning to the same therapy pattern that they would receive using a traditional insulin pump.","title":"Resume Basal Rate"},{"location":"algorithm/temp-basal/#determining-the-temporary-basal-rate","text":"To determine the corrective temporary basal rate to implement, Loop calculates a \u201cdose\u201d in the same way doses are calculated in both open loop and traditional insulin pump therapy. It's also the same math many people on multiple-daily injection therapy use. The benefit of Loop (and all other closed loop algorithms) is that it does this math every 5 minutes, and is far less prone to error than humans doing math. Loop also does its math based on predicting into the future, which traditional pumps, and humans, do not do. The amount of insulin needed, or dose, is calculated using the desired reduction in blood glucose and the user\u2019s ISF. For the Loop algorithm, the desired reduction in blood glucose is the delta between the eventual blood glucose and the correction target: A major difference between traditional pump therapy and how the Loop calculates dose is that in pump therapy the current blood glucose is used to estimate the dose, whereas in the Loop algorithm the eventual and minimum blood glucose predictions are also used in determining dosing decisions. Loop then converts the dose into a basal rate using the Loop\u2019s maximum basal rate duration of 30 minutes: where BR is the basal rate (U/hr), which is the amount of insulin needed over the next 30 minutes to bring the eventual blood glucose to the correction target. The basal rate, however, is the amount of basal rate needed beyond the user\u2019s scheduled basal rate. As such, the required basal rate can be determined by: where RBR is the required basal rate and SBR is the scheduled basal rate. Finally, Loop compares the RBR with the user-specified maximum temporary basal rate setting to determine the temporary basal to issue: If RBR \u2265 maximum basal rate, then Loop will issue the maximum basal rate If RBR < maximum temporary basal rate, then Loop will issue RBR After running the temporary basal calculation described above, Loop checks whether there is already an appropriate basal running with at least 10 minutes remaining. If so, Loop will not reissue the temporary basal. However, if the recommended temporary basal differs from the currently running temporary basal \u2014 or the current scheduled basal if no temporary is running \u2014 then Loop will replace the current basal rate with the recommended temporary basal rate. As mentioned at the beginning of this section, the process of determining whether a temporary basal should be issued is repeated every 5 minutes.","title":"Determining the Temporary Basal Rate"},{"location":"algorithm/temp-basal/#temporary-basal-rate-calculation-example","text":"To illustrate how the Loop calculates the temporary basal rate to issue, consider the calculation for the following scenario: Eventual blood glucose = 200 mg/dL Correction target = 100 mg/dL ISF = 50 mg/dL/U Current scheduled basal rate (SBR) is 1 U/hr Maximum basal setting (set by user in Loop) = 6 U/hr First, calculate the dose: Then, convert the dose into a basal rate to be issued for the next 30 minutes: Next, calculate the required basal rate: Lastly, compare the required basal rate to the maximum temporary basal rate, and find that Loop will enact a temporary basal rate of 5 U/hr for 30 minutes since this temporary basal rate is below the maximum temporary basal rate of 6 U/hr, which was set by the user in Loop app settings.","title":"Temporary Basal Rate Calculation Example"},{"location":"data/glucodyn/","text":"Glucodyn \u2301 pulls from ns mlab visualizations","title":"Glucodyn"},{"location":"data/glucodyn/#glucodyn","text":"pulls from ns mlab visualizations","title":"Glucodyn"},{"location":"data/health/","text":"Health App \u2301 iOS 11 and newer insulin carb bgs","title":"Health"},{"location":"data/health/#health-app","text":"iOS 11 and newer insulin carb bgs","title":"Health App"},{"location":"data/loop/","text":"Loop \u2301 ICE screens charts behind BG chart","title":"Loop"},{"location":"data/loop/#loop","text":"ICE screens charts behind BG chart","title":"Loop"},{"location":"data/nightscout/","text":"Nightscout \u2301 insulin carbs bgs targets profiles etc","title":"Nightscout"},{"location":"data/nightscout/#nightscout","text":"insulin carbs bgs targets profiles etc","title":"Nightscout"},{"location":"data/overview/","text":"Loop Data \u2301 What kind of data and why you'd want it","title":"Overview"},{"location":"data/overview/#loop-data","text":"What kind of data and why you'd want it","title":"Loop Data"},{"location":"data/tidepool/","text":"Tidepool \u2301 clinic integrations mobile uploader (new) short-comings (will be addressed?)","title":"Tidepool"},{"location":"data/tidepool/#tidepool","text":"clinic integrations mobile uploader (new) short-comings (will be addressed?)","title":"Tidepool"},{"location":"how-to/bolus/","text":"Test Your Settings \u2301 Open Looping Fine-Tuning Settings Book settings","title":"Extended Bolus"},{"location":"how-to/bolus/#test-your-settings","text":"Open Looping Fine-Tuning Settings Book settings","title":"Test Your Settings"},{"location":"how-to/cgm/","text":"CGM warm-ups \u2301 During warm-ups, what to expect? Open-loop during warmup back to scheduled basals after temp basal (30 min) wears off health app...but would require too frequent of FS...not recommended","title":"CGM warmups"},{"location":"how-to/cgm/#cgm-warm-ups","text":"During warm-ups, what to expect? Open-loop during warmup back to scheduled basals after temp basal (30 min) wears off health app...but would require too frequent of FS...not recommended","title":"CGM warm-ups"},{"location":"how-to/endo/","text":"Talk to Endo \u2301 Give your Endo a heads up Send reading information Prepare data reports Know your data sources Review settings with Endo Be patient","title":"Talk with Endo"},{"location":"how-to/endo/#talk-to-endo","text":"Give your Endo a heads up Send reading information Prepare data reports Know your data sources Review settings with Endo Be patient","title":"Talk to Endo"},{"location":"how-to/exercise/","text":"Test Your Settings \u2301 Open Looping Fine-Tuning Settings Book settings","title":"Exercise"},{"location":"how-to/exercise/#test-your-settings","text":"Open Looping Fine-Tuning Settings Book settings","title":"Test Your Settings"},{"location":"how-to/high-bg/","text":"Stuck on High BG \u2301 Is this temporary? Is this after meals? Have you open looped? Illness? Stress? Short term options Long term options","title":"Stuck on High"},{"location":"how-to/high-bg/#stuck-on-high-bg","text":"Is this temporary? Is this after meals? Have you open looped? Illness? Stress? Short term options Long term options","title":"Stuck on High BG"},{"location":"how-to/illness/","text":"Illness \u2301 Tough short-term? long-term? consult endo if in doubt Use overrides adjust settings if longer term","title":"Illness"},{"location":"how-to/illness/#illness","text":"Tough short-term? long-term? consult endo if in doubt Use overrides adjust settings if longer term","title":"Illness"},{"location":"how-to/iob/","text":"Test Your Settings \u2301 Open Looping Fine-Tuning Settings Book settings","title":"Adjust IOB"},{"location":"how-to/iob/#test-your-settings","text":"Open Looping Fine-Tuning Settings Book settings","title":"Test Your Settings"},{"location":"how-to/low-treat/","text":"Low Treatments \u2301 Less carbs than you may be used to To log or not to log Due to short term cause or long term cause? use override don't log carbs","title":"Low Treatments"},{"location":"how-to/low-treat/#low-treatments","text":"Less carbs than you may be used to To log or not to log Due to short term cause or long term cause? use override don't log carbs","title":"Low Treatments"},{"location":"how-to/meal/","text":"Test Your Settings \u2301 Open Looping Fine-Tuning Settings Book settings","title":"LC/HF meals"},{"location":"how-to/meal/#test-your-settings","text":"Open Looping Fine-Tuning Settings Book settings","title":"Test Your Settings"},{"location":"how-to/overrides/","text":"Override Targets \u2301 What do they do? When to use?","title":"Override Targets"},{"location":"how-to/overrides/#override-targets","text":"What do they do? When to use?","title":"Override Targets"},{"location":"how-to/overview/","text":"Overview \u2301 Overview of how-to section","title":"Overview"},{"location":"how-to/overview/#overview","text":"Overview of how-to section","title":"Overview"},{"location":"how-to/site-fail/","text":"Test Your Settings \u2301 Open Looping Fine-Tuning Settings Book settings","title":"Site Failure"},{"location":"how-to/site-fail/#test-your-settings","text":"Open Looping Fine-Tuning Settings Book settings","title":"Test Your Settings"},{"location":"how-to/teens-kids/","text":"Test Your Settings \u2301 Open Looping Fine-Tuning Settings Book settings","title":"Teens/Kids"},{"location":"how-to/teens-kids/#test-your-settings","text":"Open Looping Fine-Tuning Settings Book settings","title":"Test Your Settings"},{"location":"settings/adjust/","text":"Adjusting Your Settings \u2301 There will be times when you need to adjust your settings in order to keep your blood glucose within your correction range. The degree to which you adjust your settings will depend on a variety of personal decisions about how active you engage with your diabetes, how comfortable your endocrinologist may feel with patient-adjusted settings, and what the underlying reason for the change is. Troubleshooting before a change \u2301 The most common reason that people decide it may be time to adjust their settings is when previously great blood glucose control suddenly becomes elusive. What worked yesterday is no longer working today. Before considering a change to your settings, the usual laundry list of possible other causes should be explored. Bad infusion site (kinked cannula, blood in cannula, infected site?) Bad insulin (cloudy? insulin exposed to heat/freezing?) Unexpected food impacts (that diet coke wasn't diet, kid sneaking food?) CGM damaged (poor calibration, damaged sensor site?) Some signs that the issue is actually the result of equipment failure include failure of blood glucose to decrease despite repeated bolus corrections. Often during equipment failure troubleshooting, you've blamed the food (and adjusted a carbohydrate count), given corrections, checked for hidden food wrappers, and maybe even open-looped rage bolused. Breathe deep, it is super frustrating to have equipment failure. One of the benefits of Loop can be that equipment failures can become a little easier to identify over time because blood glucose control becomes more predictable and reliable. Assess the duration \u2301 Once you have eliminated equipment failures as a source of the unexpected blood glucose control problems, it is time to determine if this is a short-term or long-term issue. This assessment tends to be a skill that people will get better with practice. Because of course, as soon as you test and dial-in all those settings, diabetes will throw you a curve ball and change your insulin needs. That's the way it works. It's not just YDMV (your diabetes may vary), it's actually YDWV (your diabetes will vary). Before considering a change to your settings, you should assess if you expect the issue to resolve on its own soon or if the issue might be caused by a more longer term issue that should be addressed. Short-term factors \u2301 There's a long list of short-term factors that may temporarily affect how well Loop can automatically keep your blood glucose at your correction goal. Of course, the definition of \"temporarily\" is also subjective. Some people grow impatient with blood glucose excursions within hours and other people don't consider the need to correct excursions for days. That difference in tolerance will affect a user's assessment of how quickly they will consider adjusting settings. For these discussions, short-term is referring to less than a day. For the most part, it is not a good idea to adjust settings for very short-term underlying causes such as: One or two meals that behave differently than expected Stress from a final exam Anticipation of holiday party buffet table Sprinting in the airport to catch a plane \"Baggage claim\" lows from pressure changes causing unexpected insulin delivery Weather Those are very short term factors and if you change your underlying settings too quickly from just one or two observed blood glucose excursions, you'll likely end up needing to undo the changes just as quickly. For these short-term factors, the best tools involve using temporary target overrides and a measure of patience. In some medium-duration cases (factors that last for at least several hours), people also use \"fake\" carbohydrate entries to mimic the extra insulin needed during temporary stress on the system which causes high blood glucose. Long-term factors \u2301 The list of long-term factors is just as long, but the most common are probably: Growth hormones Menstrual cycle hormones Illness Medications Travel Beginning new consistent exercise routine (or suddenly becoming more sedentary) For long(er) term factors, you may benefit from adjusting your underlying settings to reflect the insulin-need changes that have happened as a result of the factors. By adjusting your underlying settings, you will help Loop to better predict your insulin needs and therefore you'll be more likely to achieve blood glucose in correction range. Assess the need \u2301 Once you have assessed that there's been a long(er) term need for a settings adjustment, the next step is to decide which setting(s) to change and how to adjust them. Whether you undertake the adjustments by yourself and/or with your health care provider's input is at your own discretion. Ideally, you would have your health care provider's input and support to discuss the observations and concerns you have and develop an adjusted setting profile based on those discussions. Many endocrinologists are still becoming familiar with Loop and its algorithm, so providing them links to the various sites would be a good starting point for discussion. This can help the endocrinologist understand where Loop is similar/different than traditional pump therapy. If you and your health care provider are comfortable with your self-adjustments and Loop's algorithm, then proceed ahead.","title":"Adjust Your Settings"},{"location":"settings/adjust/#adjusting-your-settings","text":"There will be times when you need to adjust your settings in order to keep your blood glucose within your correction range. The degree to which you adjust your settings will depend on a variety of personal decisions about how active you engage with your diabetes, how comfortable your endocrinologist may feel with patient-adjusted settings, and what the underlying reason for the change is.","title":"Adjusting Your Settings"},{"location":"settings/adjust/#troubleshooting-before-a-change","text":"The most common reason that people decide it may be time to adjust their settings is when previously great blood glucose control suddenly becomes elusive. What worked yesterday is no longer working today. Before considering a change to your settings, the usual laundry list of possible other causes should be explored. Bad infusion site (kinked cannula, blood in cannula, infected site?) Bad insulin (cloudy? insulin exposed to heat/freezing?) Unexpected food impacts (that diet coke wasn't diet, kid sneaking food?) CGM damaged (poor calibration, damaged sensor site?) Some signs that the issue is actually the result of equipment failure include failure of blood glucose to decrease despite repeated bolus corrections. Often during equipment failure troubleshooting, you've blamed the food (and adjusted a carbohydrate count), given corrections, checked for hidden food wrappers, and maybe even open-looped rage bolused. Breathe deep, it is super frustrating to have equipment failure. One of the benefits of Loop can be that equipment failures can become a little easier to identify over time because blood glucose control becomes more predictable and reliable.","title":"Troubleshooting before a change"},{"location":"settings/adjust/#assess-the-duration","text":"Once you have eliminated equipment failures as a source of the unexpected blood glucose control problems, it is time to determine if this is a short-term or long-term issue. This assessment tends to be a skill that people will get better with practice. Because of course, as soon as you test and dial-in all those settings, diabetes will throw you a curve ball and change your insulin needs. That's the way it works. It's not just YDMV (your diabetes may vary), it's actually YDWV (your diabetes will vary). Before considering a change to your settings, you should assess if you expect the issue to resolve on its own soon or if the issue might be caused by a more longer term issue that should be addressed.","title":"Assess the duration"},{"location":"settings/adjust/#short-term-factors","text":"There's a long list of short-term factors that may temporarily affect how well Loop can automatically keep your blood glucose at your correction goal. Of course, the definition of \"temporarily\" is also subjective. Some people grow impatient with blood glucose excursions within hours and other people don't consider the need to correct excursions for days. That difference in tolerance will affect a user's assessment of how quickly they will consider adjusting settings. For these discussions, short-term is referring to less than a day. For the most part, it is not a good idea to adjust settings for very short-term underlying causes such as: One or two meals that behave differently than expected Stress from a final exam Anticipation of holiday party buffet table Sprinting in the airport to catch a plane \"Baggage claim\" lows from pressure changes causing unexpected insulin delivery Weather Those are very short term factors and if you change your underlying settings too quickly from just one or two observed blood glucose excursions, you'll likely end up needing to undo the changes just as quickly. For these short-term factors, the best tools involve using temporary target overrides and a measure of patience. In some medium-duration cases (factors that last for at least several hours), people also use \"fake\" carbohydrate entries to mimic the extra insulin needed during temporary stress on the system which causes high blood glucose.","title":"Short-term factors"},{"location":"settings/adjust/#long-term-factors","text":"The list of long-term factors is just as long, but the most common are probably: Growth hormones Menstrual cycle hormones Illness Medications Travel Beginning new consistent exercise routine (or suddenly becoming more sedentary) For long(er) term factors, you may benefit from adjusting your underlying settings to reflect the insulin-need changes that have happened as a result of the factors. By adjusting your underlying settings, you will help Loop to better predict your insulin needs and therefore you'll be more likely to achieve blood glucose in correction range.","title":"Long-term factors"},{"location":"settings/adjust/#assess-the-need","text":"Once you have assessed that there's been a long(er) term need for a settings adjustment, the next step is to decide which setting(s) to change and how to adjust them. Whether you undertake the adjustments by yourself and/or with your health care provider's input is at your own discretion. Ideally, you would have your health care provider's input and support to discuss the observations and concerns you have and develop an adjusted setting profile based on those discussions. Many endocrinologists are still becoming familiar with Loop and its algorithm, so providing them links to the various sites would be a good starting point for discussion. This can help the endocrinologist understand where Loop is similar/different than traditional pump therapy. If you and your health care provider are comfortable with your self-adjustments and Loop's algorithm, then proceed ahead.","title":"Assess the need"},{"location":"settings/overview/","text":"Overview \u2301 In the context of the following discussion, the term \"settings\" refers to information that the user has typically entered into their pump. These settings include: basal rate schedule insulin sensitivitiy factor (ISF) carbohydrate to insulin ratio (CR) duration of insulin activity (DIA) correction range Typically, most people with type 1 diabetes consult with their endocrinologist to develop and revise their settings. The endocrinologist usually reviews the patient's blood glucose and treatment history at each appointment to assess whether settings need to be adjusted. There are several great books available about the topic (Think Like A Pancreas, etc) Why settings matter \u2301 Loop is primarily a set of math equations called an algorithm. The recommendations and actions that Loop takes are based on that algorithm, and the settings you enter in your Loop app are the basis for that math. Let's start by thinking about basal rates. A well-adjusted basal schedule is designed to keep your blood glucose steady throughout the day, everything else being equal. If you were to not eat, not exercise, and basically keep a mellow lifestyle...basals should keep your blood glucose steady. That is how Loop's math starts, and it's an important point to remember as you use and learn your Loop app. Loop's math is based on the assumption that the basal schedule you have provided in your settings are capable of keeping your blood glucose steady in the absence of other stressors. So as your blood glucose goes higher than your correction range for an unusual short-term influence like stress or unannounced carbs, you've been accoustomed to delivering a \"correction bolus\" to get back to range. Or if blood glucose goes below your correction range, you may need to eat recovery carbohydrates. With all the excitement about automated insulin delivery, some people mistakenly assume that the user's settings don't matter anymore....that everything is automated. However, settings do still matter as they provide the basis for Loop's math. Diabetes is not a static math equation. Loop does not adjust your settings for you, that responsibility still falls to the Loop user when needed. Let's give some examples to help. When you calculate a meal bolus, your math probably looks similar to this: But many times you are probably adjusting that math based on any number of \"factors\" that you are aware could be affecting your blood glucose. Diatribe put together this great list of factors that affect blood glucose, and therefore could also affect how you'd adjust your insulin delivery from what they otherwise would normally be. Some of those factors you are already used to making allowances for, such as: Pizza boluses...You probably are accustomed to needing an extended bolus and/or higher temp basal rate to help with the late blood glucose spike common after the initial bolus starts to wear off. That pizza takes a long time to digest thanks to those slow-acting fats. Medications...How about that time that you had to take steroids for an achy joint? Those steroids probably resulted in a dramatic overall increase in insulin needs for several days, and you had to set aggressive temp basal increases or other settings adjustments. Hormones...monthly hormone cycles have many women adjusting their basal rates and/or insulin sensitivity schedules for a week or so each month. Exercise...always a tough one because some exercise may make your blood glucose rise (lifting weights) and other exercise may make your blood glucose drop (running). Through repetition, most people have learned how to adjust for exercise by using temporary basal rates or timing of meals/boluses. The degree to which Loop can deal with those stresses/factors is largely dependent on the duration of the \"factor\" itself and how well we can communicate to Loop that those factors are at play. For things we know are coming, we can tell Loop in advance, and Loop has ways of dealing with them mathematically. In the pizza example, Loop lets us mark the meal as long, slow digestion and therefore better react to a potential late blood glucose rise. For exercise, we can use temporary override blood glucose targets before/after exercise to help Loop administer less insulin for awhile. If, however, your insulin needs are impacted by something more long term such as horomone cycles, medications, or illness then sometimes your Loop may not be able to consistently hold you at your desired blood glucose. You may end up holding steady at a higher/lower blood glucose than you'd prefer. This is because Loop's math is still using the inputs that were from before you got sick/stressed/horomone'd (new word). Then the decision becomes \"Do you adjust your settings now or just wait it out until the stressor goes away?\" When do you need to change settings? \u2301 If the inputs to those math equations (i.e., your settings) are not accurate, your results for blood glucose control may also not be optimal. Your basic insulin settings are what keeps your blood glucose steady without stessors present. For much of the time, the stressors in type 1 are short-lived and temporary (we just ride them out)...carbohydrate count is a little off, math test in algebra class, public speaking engagement, etc. Loop does well helping with the short-term stressors. They don't represent a prolonged need to change settings and the blood glucose impacts are short-lived as Loop corrects for them. However, the longer term stressors are often helped by settings adjustments. Examples of longer term stressors are medications, illness, hormones, travel, or altitude. By letting Loop know that the status quo has changed (more/less insulin is needed overall) will help BGs get and stay in range. If you have told Loop that your insulin need is 1 unit/hour, but in reality you're needing 1.3 units/hour because you've traveled to a colder place and will be sedentary for days...you will likely find yourself steady but higher than your target range while looping. The high temp basals that Loop will be providing in an attempt to bring you back to target will simply be going to fill the lack of adequate basal scheduled. If you update your basal schedule to reflect 1.3 units/hour of basal needs, Loop would be better positioned to provide needed insulin delivery to keep you in target range. Automated settings adjustments \u2301 A common sentiment among new Loop users goes something like \"Why doesn't Loop see that I'm stuck on a high blood glucose? Why doesn't it bring me back to my target blood glucose?\" What's the user is actually implying is that the user thinks Loop should be doing some sort of retrospective analysis on the user's blood glucose and data to make a \"better\" decision. The user wants Loop to learn from recent data and adjust. There is a short-term retrospective analysis built into Loop which will apply a weighted-correction based on the past 60 minutes of blood glucose changes. While this does help some, larger-scale \"learning\" is not currently a part of Loop's algorithm. Perhaps in subsequent versions of Loop, auto-adjustment of settings or machine learning could be incorporated. Until then, you will need to tell Loop if your underlying settings need upating. These pages in LoopTips are written to help you identify when settings may need adjustment or when other techniques may be useful in given situations.","title":"Why Settings Matter"},{"location":"settings/overview/#overview","text":"In the context of the following discussion, the term \"settings\" refers to information that the user has typically entered into their pump. These settings include: basal rate schedule insulin sensitivitiy factor (ISF) carbohydrate to insulin ratio (CR) duration of insulin activity (DIA) correction range Typically, most people with type 1 diabetes consult with their endocrinologist to develop and revise their settings. The endocrinologist usually reviews the patient's blood glucose and treatment history at each appointment to assess whether settings need to be adjusted. There are several great books available about the topic (Think Like A Pancreas, etc)","title":"Overview"},{"location":"settings/overview/#why-settings-matter","text":"Loop is primarily a set of math equations called an algorithm. The recommendations and actions that Loop takes are based on that algorithm, and the settings you enter in your Loop app are the basis for that math. Let's start by thinking about basal rates. A well-adjusted basal schedule is designed to keep your blood glucose steady throughout the day, everything else being equal. If you were to not eat, not exercise, and basically keep a mellow lifestyle...basals should keep your blood glucose steady. That is how Loop's math starts, and it's an important point to remember as you use and learn your Loop app. Loop's math is based on the assumption that the basal schedule you have provided in your settings are capable of keeping your blood glucose steady in the absence of other stressors. So as your blood glucose goes higher than your correction range for an unusual short-term influence like stress or unannounced carbs, you've been accoustomed to delivering a \"correction bolus\" to get back to range. Or if blood glucose goes below your correction range, you may need to eat recovery carbohydrates. With all the excitement about automated insulin delivery, some people mistakenly assume that the user's settings don't matter anymore....that everything is automated. However, settings do still matter as they provide the basis for Loop's math. Diabetes is not a static math equation. Loop does not adjust your settings for you, that responsibility still falls to the Loop user when needed. Let's give some examples to help. When you calculate a meal bolus, your math probably looks similar to this: But many times you are probably adjusting that math based on any number of \"factors\" that you are aware could be affecting your blood glucose. Diatribe put together this great list of factors that affect blood glucose, and therefore could also affect how you'd adjust your insulin delivery from what they otherwise would normally be. Some of those factors you are already used to making allowances for, such as: Pizza boluses...You probably are accustomed to needing an extended bolus and/or higher temp basal rate to help with the late blood glucose spike common after the initial bolus starts to wear off. That pizza takes a long time to digest thanks to those slow-acting fats. Medications...How about that time that you had to take steroids for an achy joint? Those steroids probably resulted in a dramatic overall increase in insulin needs for several days, and you had to set aggressive temp basal increases or other settings adjustments. Hormones...monthly hormone cycles have many women adjusting their basal rates and/or insulin sensitivity schedules for a week or so each month. Exercise...always a tough one because some exercise may make your blood glucose rise (lifting weights) and other exercise may make your blood glucose drop (running). Through repetition, most people have learned how to adjust for exercise by using temporary basal rates or timing of meals/boluses. The degree to which Loop can deal with those stresses/factors is largely dependent on the duration of the \"factor\" itself and how well we can communicate to Loop that those factors are at play. For things we know are coming, we can tell Loop in advance, and Loop has ways of dealing with them mathematically. In the pizza example, Loop lets us mark the meal as long, slow digestion and therefore better react to a potential late blood glucose rise. For exercise, we can use temporary override blood glucose targets before/after exercise to help Loop administer less insulin for awhile. If, however, your insulin needs are impacted by something more long term such as horomone cycles, medications, or illness then sometimes your Loop may not be able to consistently hold you at your desired blood glucose. You may end up holding steady at a higher/lower blood glucose than you'd prefer. This is because Loop's math is still using the inputs that were from before you got sick/stressed/horomone'd (new word). Then the decision becomes \"Do you adjust your settings now or just wait it out until the stressor goes away?\"","title":"Why settings matter"},{"location":"settings/overview/#when-do-you-need-to-change-settings","text":"If the inputs to those math equations (i.e., your settings) are not accurate, your results for blood glucose control may also not be optimal. Your basic insulin settings are what keeps your blood glucose steady without stessors present. For much of the time, the stressors in type 1 are short-lived and temporary (we just ride them out)...carbohydrate count is a little off, math test in algebra class, public speaking engagement, etc. Loop does well helping with the short-term stressors. They don't represent a prolonged need to change settings and the blood glucose impacts are short-lived as Loop corrects for them. However, the longer term stressors are often helped by settings adjustments. Examples of longer term stressors are medications, illness, hormones, travel, or altitude. By letting Loop know that the status quo has changed (more/less insulin is needed overall) will help BGs get and stay in range. If you have told Loop that your insulin need is 1 unit/hour, but in reality you're needing 1.3 units/hour because you've traveled to a colder place and will be sedentary for days...you will likely find yourself steady but higher than your target range while looping. The high temp basals that Loop will be providing in an attempt to bring you back to target will simply be going to fill the lack of adequate basal scheduled. If you update your basal schedule to reflect 1.3 units/hour of basal needs, Loop would be better positioned to provide needed insulin delivery to keep you in target range.","title":"When do you need to change settings?"},{"location":"settings/overview/#automated-settings-adjustments","text":"A common sentiment among new Loop users goes something like \"Why doesn't Loop see that I'm stuck on a high blood glucose? Why doesn't it bring me back to my target blood glucose?\" What's the user is actually implying is that the user thinks Loop should be doing some sort of retrospective analysis on the user's blood glucose and data to make a \"better\" decision. The user wants Loop to learn from recent data and adjust. There is a short-term retrospective analysis built into Loop which will apply a weighted-correction based on the past 60 minutes of blood glucose changes. While this does help some, larger-scale \"learning\" is not currently a part of Loop's algorithm. Perhaps in subsequent versions of Loop, auto-adjustment of settings or machine learning could be incorporated. Until then, you will need to tell Loop if your underlying settings need upating. These pages in LoopTips are written to help you identify when settings may need adjustment or when other techniques may be useful in given situations.","title":"Automated settings adjustments"},{"location":"settings/settings/","text":"Initial Settings \u2301 Here's how 90% of Loopers start: Switch from their existing pump over to a Loop-compatible pump Within hours, they begin closed loop use of Loop When blood glucose isn't as smooth as hoped for, Looper begins to try to adjust settings while still in closed loop The problem with this sequence is that adjusting settings on the fly while in closed loop can be difficult as a new user. Here are some recommendations to help make the transition to closed loop easier. The first place to start is with getting the best initial settings as you can. Try Open Looping first \u2301 If I could offer one bit of really useful advice, it would be to open loop for at least a few days and don't accept any of the temporary basal recommendations from Loop. Just watch and get used to the Loop program. Adjust to the user interface and buttons you'll be pressing. This breaking-in phase will also let you get used to the Medtronic pump and sites. If there are differences between how your body absorbs insulin from your old pump vs the Medtronic pump, open looping will be a good way to notice those before adding the complexity of automated corrections from Loop. [Note: while open looping and entering meals with the pizza icon, Loop may recommend less upfront bolus with the intent to make up the remainder of needed insulin via high temporary basals later. In those situations, you may have to manually dose the split portion of the bolus later, similar to normal pump use for slow digesting meals like pizza and quesadillas, since Loop will not be automatically setting temporary basals.] If you want extra credit points to help, you can read some excellent books about pump settings and what they mean. For example, Think Like a Pancreas is a great reference for understanding some of the guiding principles in pump therapy. Let me summarize the important parts about pump settings: Basal rates should keep your blood glucose steady in the absence of other influences (such as food, medications, etc). Boluses should return your blood glucose to target after a meal. ISF should be the amount one unit of insulin drops your blood glucose without other influences. DIA is the duration of insulin activity, how long the insulin affects blood glucose It is absolutely possible to have two wrong settings look like right settings when they balance out. The problem is that those wrong settings won't balance out in all situations...and looping will not be smooth in those situations. Example: Too low of basals can be offset by regular eating of meals with too strong of a carb ratio. If you stop eating though, you'll start going high because that extra insulin from the meal boluses won't be there to help the lack of basals. Taking the time to validate your settings by truly testing them is really good practice before closing loop. 1st: Insulin Duration \u2301 The majority of pumpers have used DIA at about 3 hours on traditional pump therapy. There's a reason for that. In traditional pump use, DIA is only used to calculate the remaining active insulin (i.e, IOB) at any given time after a bolus. That's it. And when do we use that active insulin value in traditional pump therapy? Usually when we want to give a correction because blood glucose is stuck high or going low...in other words, DIA is used as a rough approximation to correct off-target blood glucose. It doesn't have to be rocket science then since we're making an approximation because some other numbers (carbohydrate count, basals, ISF, etc) weren't behaving the way we were expecting either and therefore leading to an off-target blood glucose. But in looping, DIA plays a huge role in how Loop is anticipating and evaluating your blood glucose movement. DIA is used to calculate how much insulin is remaining in your system (i.e., active insulin) to potentially move your blood glucose. Active insulin is used literally every single loop calculation for what temporary basal or bolus to recommend. Not only that, but the strength of the insulin at any given time is also being used. Closed-loops know and care about whether your insulin was given recently and is due to peak soon (between 60-90 minutes with novolog/humalog), or if it is in the slow, tailing portion later where BG impacts are going to be way less dramatic. DIA means a lot in your closed-looping world. What will happen if you use too short of a DIA in closed-looping? You'll see symptoms in a variety of ways, but too short a DIA will give the equivalent of insulin-stacking. Loop's assumption will be that insulin is disappearing faster than it actually is. If you are getting steady blood glucose while closed looping with a short DIA, it's likely that your basals are being set too low to compensate. If instead you have your basals correctly set and use a short DIA in closed-looping, you will likely find yourself going low from corrections. One good indication of this is going lower than target carrying negative IOB from previous loop low/zero temp basals. Insulin model recommendation There are four insulin models to choose from in Loop and the DIA your Loop uses is based on your model selection. Three are exponential models (Rapid-acting adult, Rapid-acting child, and Fiasp) and one is an older, less exact model (Walsh). Use one of Loop's exponential insulin curves (Rapid Acting adult/child or Fiasp) and their default DIA of 6 hours. This will help prevent insulin stacking as you begin Loop. The Walsh model, if you want to try that one, should be set to a DIA of 5.5 to 6 hours...although exponential curves are really the preferred option. You can read more about insulin models and how they help determine the active insulin over time in the Algorithm section of this site. 2nd: Basals \u2301 Now that you have a reasonable DIA and insulin model selected, make sure to test your basals. Establishing a quality basal schedule is setting yourself up for successful looping. Personally, we find testing basals can be pretty painless and doesn't require days of fasting. Instead, look for easy opportunities. If you are willing to open-loop test, that is going to give the most accurate information in the quickest way. It's a pretty easy test. Turn off your loop or open loop. Don't eat food, don't do crazy exercise, don't sit in a hot tub. Just have a relaxing average time period and see if your basals are able to hold you roughly steady. It doesn't matter if you are at target or not; the idea is to simply have zero extra active insulin from any boluses or corrections and watch what happens during those hours. Typically you would want to see about 3-4 hours of blood glucose without the influence of food boluses or activity. Many people, especially little kids, are not enthusiastic about fasting basal testing...so look for opportunities to make it less cumbersome if you have to eat during the test. For example, use a low carb meal/snack that you know how to bolus for (or doesn't need a bolus at all) and generally needs no corrections. For us, that's two extra large scrambled eggs (or three small ones) with cheese bolused at 8g. If she eats that meal, the blood glucose response is slow and measured. Three hours after that meal, the bolus and food effects are really muted and we can start watching to see if blood glucose stayed pretty steady. For example, here's some of a recent open-loop basal testing we did and confirmed that blood glucose could stay pretty steady without the involvement of temporary basal help from looping. 3rd: Insulin sensitivity factor \u2301 Insulin sensitivity factor (ISF) is the next logical setting to test. If you've just done the basal test and gotten steady blood glucose with an open loop, try taking a glucose tab or two. Wait for your blood glucose to be steady at the higher value, and give a safe correction that you think will get you close to target. Watch the resulting blood glucose drop over the next 3-4 hours. You should see blood glucose come to a steady level again. How much did the blood glucose drop? How many units of insulin did you use? Divide the two numbers and you will have your ISF. If your BG dropped 15 mg/dL with half unit of insulin, your ISF is approximately 30 mg/dL per unit. If your ISF is set too weak (in other words the actual number is too low compared to reality of how strong the insulin is affecting you) in closed-looping, one of the most common symptoms you'll see is a roller coaster of blood glucose where the temporary basals are cycling between zero and strong high temporary rates. Here are some example graphs from Looped group. These are examples where too weak of ISF is more than likely a large factor in the roller-coaster (doesn't mean it is the only culprit, and is more difficult to ferret out when food is involved like the second graph). But, lightning bolt high temp basals followed by very quick BG drops and zero temps is usually too weak of ISF...raise the ISF number to help looping know that each unit of insulin is actually doing more BG dropping. 4th: Carb Ratios \u2301 Now that you have basals, ISF, and DIA all set-up, here's where it gets really tempting to close loop and move on. And, truthfully, it's not that hard to test carb ratios on a closed loop vs an open loop if you've solidly tested all these other factors. A good carb ratio will bring your blood glucose, for an average meal, back to the starting point of the meal within about 3 hours or so. A bad carb ratio will leave you higher or lower than the starting point of the meal. For example, this graph shows too aggressive of a carb ratio. Three hours after the meal, there's nearly 0.50 units of active insulin, blood glucose is well below where the meal started, and definitely low treatments needed. If you are finding that a correct carb ratio is yielding good blood glucose 3 hours later, but you aren't happy with the peak blood glucose during the meal, then it may be time to explore increasing or adding prebolusing time to your meal or implementing \"eating soon\" targets an hour before meals to help control the post-meal blood glucose spike. Artificially strengthening carb ratios to help control post-meal blood glucose spike will likely yield lows 2-3 hours after a meal.","title":"Initial Settings"},{"location":"settings/settings/#initial-settings","text":"Here's how 90% of Loopers start: Switch from their existing pump over to a Loop-compatible pump Within hours, they begin closed loop use of Loop When blood glucose isn't as smooth as hoped for, Looper begins to try to adjust settings while still in closed loop The problem with this sequence is that adjusting settings on the fly while in closed loop can be difficult as a new user. Here are some recommendations to help make the transition to closed loop easier. The first place to start is with getting the best initial settings as you can.","title":"Initial Settings"},{"location":"settings/settings/#try-open-looping-first","text":"If I could offer one bit of really useful advice, it would be to open loop for at least a few days and don't accept any of the temporary basal recommendations from Loop. Just watch and get used to the Loop program. Adjust to the user interface and buttons you'll be pressing. This breaking-in phase will also let you get used to the Medtronic pump and sites. If there are differences between how your body absorbs insulin from your old pump vs the Medtronic pump, open looping will be a good way to notice those before adding the complexity of automated corrections from Loop. [Note: while open looping and entering meals with the pizza icon, Loop may recommend less upfront bolus with the intent to make up the remainder of needed insulin via high temporary basals later. In those situations, you may have to manually dose the split portion of the bolus later, similar to normal pump use for slow digesting meals like pizza and quesadillas, since Loop will not be automatically setting temporary basals.] If you want extra credit points to help, you can read some excellent books about pump settings and what they mean. For example, Think Like a Pancreas is a great reference for understanding some of the guiding principles in pump therapy. Let me summarize the important parts about pump settings: Basal rates should keep your blood glucose steady in the absence of other influences (such as food, medications, etc). Boluses should return your blood glucose to target after a meal. ISF should be the amount one unit of insulin drops your blood glucose without other influences. DIA is the duration of insulin activity, how long the insulin affects blood glucose It is absolutely possible to have two wrong settings look like right settings when they balance out. The problem is that those wrong settings won't balance out in all situations...and looping will not be smooth in those situations. Example: Too low of basals can be offset by regular eating of meals with too strong of a carb ratio. If you stop eating though, you'll start going high because that extra insulin from the meal boluses won't be there to help the lack of basals. Taking the time to validate your settings by truly testing them is really good practice before closing loop.","title":"Try Open Looping first"},{"location":"settings/settings/#1st-insulin-duration","text":"The majority of pumpers have used DIA at about 3 hours on traditional pump therapy. There's a reason for that. In traditional pump use, DIA is only used to calculate the remaining active insulin (i.e, IOB) at any given time after a bolus. That's it. And when do we use that active insulin value in traditional pump therapy? Usually when we want to give a correction because blood glucose is stuck high or going low...in other words, DIA is used as a rough approximation to correct off-target blood glucose. It doesn't have to be rocket science then since we're making an approximation because some other numbers (carbohydrate count, basals, ISF, etc) weren't behaving the way we were expecting either and therefore leading to an off-target blood glucose. But in looping, DIA plays a huge role in how Loop is anticipating and evaluating your blood glucose movement. DIA is used to calculate how much insulin is remaining in your system (i.e., active insulin) to potentially move your blood glucose. Active insulin is used literally every single loop calculation for what temporary basal or bolus to recommend. Not only that, but the strength of the insulin at any given time is also being used. Closed-loops know and care about whether your insulin was given recently and is due to peak soon (between 60-90 minutes with novolog/humalog), or if it is in the slow, tailing portion later where BG impacts are going to be way less dramatic. DIA means a lot in your closed-looping world. What will happen if you use too short of a DIA in closed-looping? You'll see symptoms in a variety of ways, but too short a DIA will give the equivalent of insulin-stacking. Loop's assumption will be that insulin is disappearing faster than it actually is. If you are getting steady blood glucose while closed looping with a short DIA, it's likely that your basals are being set too low to compensate. If instead you have your basals correctly set and use a short DIA in closed-looping, you will likely find yourself going low from corrections. One good indication of this is going lower than target carrying negative IOB from previous loop low/zero temp basals. Insulin model recommendation There are four insulin models to choose from in Loop and the DIA your Loop uses is based on your model selection. Three are exponential models (Rapid-acting adult, Rapid-acting child, and Fiasp) and one is an older, less exact model (Walsh). Use one of Loop's exponential insulin curves (Rapid Acting adult/child or Fiasp) and their default DIA of 6 hours. This will help prevent insulin stacking as you begin Loop. The Walsh model, if you want to try that one, should be set to a DIA of 5.5 to 6 hours...although exponential curves are really the preferred option. You can read more about insulin models and how they help determine the active insulin over time in the Algorithm section of this site.","title":"1st: Insulin Duration"},{"location":"settings/settings/#2nd-basals","text":"Now that you have a reasonable DIA and insulin model selected, make sure to test your basals. Establishing a quality basal schedule is setting yourself up for successful looping. Personally, we find testing basals can be pretty painless and doesn't require days of fasting. Instead, look for easy opportunities. If you are willing to open-loop test, that is going to give the most accurate information in the quickest way. It's a pretty easy test. Turn off your loop or open loop. Don't eat food, don't do crazy exercise, don't sit in a hot tub. Just have a relaxing average time period and see if your basals are able to hold you roughly steady. It doesn't matter if you are at target or not; the idea is to simply have zero extra active insulin from any boluses or corrections and watch what happens during those hours. Typically you would want to see about 3-4 hours of blood glucose without the influence of food boluses or activity. Many people, especially little kids, are not enthusiastic about fasting basal testing...so look for opportunities to make it less cumbersome if you have to eat during the test. For example, use a low carb meal/snack that you know how to bolus for (or doesn't need a bolus at all) and generally needs no corrections. For us, that's two extra large scrambled eggs (or three small ones) with cheese bolused at 8g. If she eats that meal, the blood glucose response is slow and measured. Three hours after that meal, the bolus and food effects are really muted and we can start watching to see if blood glucose stayed pretty steady. For example, here's some of a recent open-loop basal testing we did and confirmed that blood glucose could stay pretty steady without the involvement of temporary basal help from looping.","title":"2nd: Basals"},{"location":"settings/settings/#3rd-insulin-sensitivity-factor","text":"Insulin sensitivity factor (ISF) is the next logical setting to test. If you've just done the basal test and gotten steady blood glucose with an open loop, try taking a glucose tab or two. Wait for your blood glucose to be steady at the higher value, and give a safe correction that you think will get you close to target. Watch the resulting blood glucose drop over the next 3-4 hours. You should see blood glucose come to a steady level again. How much did the blood glucose drop? How many units of insulin did you use? Divide the two numbers and you will have your ISF. If your BG dropped 15 mg/dL with half unit of insulin, your ISF is approximately 30 mg/dL per unit. If your ISF is set too weak (in other words the actual number is too low compared to reality of how strong the insulin is affecting you) in closed-looping, one of the most common symptoms you'll see is a roller coaster of blood glucose where the temporary basals are cycling between zero and strong high temporary rates. Here are some example graphs from Looped group. These are examples where too weak of ISF is more than likely a large factor in the roller-coaster (doesn't mean it is the only culprit, and is more difficult to ferret out when food is involved like the second graph). But, lightning bolt high temp basals followed by very quick BG drops and zero temps is usually too weak of ISF...raise the ISF number to help looping know that each unit of insulin is actually doing more BG dropping.","title":"3rd:\u00a0Insulin sensitivity factor"},{"location":"settings/settings/#4th-carb-ratios","text":"Now that you have basals, ISF, and DIA all set-up, here's where it gets really tempting to close loop and move on. And, truthfully, it's not that hard to test carb ratios on a closed loop vs an open loop if you've solidly tested all these other factors. A good carb ratio will bring your blood glucose, for an average meal, back to the starting point of the meal within about 3 hours or so. A bad carb ratio will leave you higher or lower than the starting point of the meal. For example, this graph shows too aggressive of a carb ratio. Three hours after the meal, there's nearly 0.50 units of active insulin, blood glucose is well below where the meal started, and definitely low treatments needed. If you are finding that a correct carb ratio is yielding good blood glucose 3 hours later, but you aren't happy with the peak blood glucose during the meal, then it may be time to explore increasing or adding prebolusing time to your meal or implementing \"eating soon\" targets an hour before meals to help control the post-meal blood glucose spike. Artificially strengthening carb ratios to help control post-meal blood glucose spike will likely yield lows 2-3 hours after a meal.","title":"4th: Carb Ratios"}]}